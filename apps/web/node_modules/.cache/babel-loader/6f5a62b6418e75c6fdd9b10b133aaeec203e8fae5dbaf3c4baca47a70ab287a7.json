{"ast":null,"code":"var _s = $RefreshSig$();\n// src/components/CozeChat.js\n\nimport React, { useEffect, useRef } from 'react';\n\n// --- Hằng số ---\nconst COZE_BOT_ID = '7564406577911463952';\nconst YOUR_COZE_PAT_TOKEN = 'pat_FrrZbPVDVnwl97NleYEMsc9RxKvggAuykeygC0NCI9nSB1ltKbRQD3kGzve6vjgq';\nconst COZE_SCRIPT_ID = 'coze-web-sdk-script';\n// CẬP NHẬT KEY CHÍNH XÁC DỰA VÀO HÌNH ẢNH CỦA BẠN\nconst COZE_STORAGE_KEY = 'SLARDARbot_studio_sdk';\nconst CozeChat = () => {\n  _s();\n  const clientRef = useRef(null);\n  useEffect(() => {\n    // Xóa lịch sử chat cũ mỗi khi component được load (bao gồm cả khi F5)\n    localStorage.removeItem(COZE_STORAGE_KEY);\n    const initializeChat = () => {\n      if (window.CozeWebSDK && !clientRef.current) {\n        clientRef.current = new window.CozeWebSDK.WebChatClient({\n          config: {\n            bot_id: COZE_BOT_ID\n          },\n          componentProps: {\n            title: 'LandingHub Assistant',\n            description: 'Trợ lý AI của bạn'\n          },\n          auth: {\n            type: 'token',\n            token: YOUR_COZE_PAT_TOKEN,\n            onRefreshToken: () => Promise.resolve(YOUR_COZE_PAT_TOKEN)\n          }\n        });\n      }\n    };\n    const loadScript = () => {\n      if (document.getElementById(COZE_SCRIPT_ID)) {\n        initializeChat();\n        return;\n      }\n      const script = document.createElement('script');\n      script.id = COZE_SCRIPT_ID;\n      script.src = \"https://sf-cdn.coze.com/obj/unpkg-va/flow-platform/chat-app-sdk/1.2.0-beta.6/libs/oversea/index.js\";\n      script.async = true;\n      script.onload = initializeChat;\n      document.body.appendChild(script);\n    };\n    loadScript();\n    return () => {\n      if (clientRef.current && typeof clientRef.current.destroy === 'function') {\n        clientRef.current.destroy();\n      }\n      const chatWidget = document.querySelector('.web-chat-sdk-container');\n      if (chatWidget) {\n        chatWidget.parentElement.removeChild(chatWidget);\n      }\n      clientRef.current = null;\n    };\n  }, []);\n  return null;\n};\n_s(CozeChat, \"PMID0r5nDf9+pnMAo/w74pBuAKA=\");\n_c = CozeChat;\nexport default CozeChat;\nvar _c;\n$RefreshReg$(_c, \"CozeChat\");","map":{"version":3,"names":["React","useEffect","useRef","COZE_BOT_ID","YOUR_COZE_PAT_TOKEN","COZE_SCRIPT_ID","COZE_STORAGE_KEY","CozeChat","_s","clientRef","localStorage","removeItem","initializeChat","window","CozeWebSDK","current","WebChatClient","config","bot_id","componentProps","title","description","auth","type","token","onRefreshToken","Promise","resolve","loadScript","document","getElementById","script","createElement","id","src","async","onload","body","appendChild","destroy","chatWidget","querySelector","parentElement","removeChild","_c","$RefreshReg$"],"sources":["D:/landing-hub/apps/web/src/components/CozeChat.js"],"sourcesContent":["// src/components/CozeChat.js\r\n\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\n// --- Hằng số ---\r\nconst COZE_BOT_ID = '7564406577911463952';\r\nconst YOUR_COZE_PAT_TOKEN = 'pat_FrrZbPVDVnwl97NleYEMsc9RxKvggAuykeygC0NCI9nSB1ltKbRQD3kGzve6vjgq';\r\nconst COZE_SCRIPT_ID = 'coze-web-sdk-script';\r\n// CẬP NHẬT KEY CHÍNH XÁC DỰA VÀO HÌNH ẢNH CỦA BẠN\r\nconst COZE_STORAGE_KEY = 'SLARDARbot_studio_sdk';\r\n\r\nconst CozeChat = () => {\r\n    const clientRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        // Xóa lịch sử chat cũ mỗi khi component được load (bao gồm cả khi F5)\r\n        localStorage.removeItem(COZE_STORAGE_KEY);\r\n\r\n        const initializeChat = () => {\r\n            if (window.CozeWebSDK && !clientRef.current) {\r\n                clientRef.current = new window.CozeWebSDK.WebChatClient({\r\n                    config: {\r\n                        bot_id: COZE_BOT_ID,\r\n                    },\r\n                    componentProps: {\r\n                        title: 'LandingHub Assistant',\r\n                        description: 'Trợ lý AI của bạn',\r\n                    },\r\n                    auth: {\r\n                        type: 'token',\r\n                        token: YOUR_COZE_PAT_TOKEN,\r\n                        onRefreshToken: () => Promise.resolve(YOUR_COZE_PAT_TOKEN),\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        const loadScript = () => {\r\n            if (document.getElementById(COZE_SCRIPT_ID)) {\r\n                initializeChat();\r\n                return;\r\n            }\r\n            const script = document.createElement('script');\r\n            script.id = COZE_SCRIPT_ID;\r\n            script.src = \"https://sf-cdn.coze.com/obj/unpkg-va/flow-platform/chat-app-sdk/1.2.0-beta.6/libs/oversea/index.js\";\r\n            script.async = true;\r\n            script.onload = initializeChat;\r\n            document.body.appendChild(script);\r\n        };\r\n\r\n        loadScript();\r\n\r\n        return () => {\r\n            if (clientRef.current && typeof clientRef.current.destroy === 'function') {\r\n                clientRef.current.destroy();\r\n            }\r\n            const chatWidget = document.querySelector('.web-chat-sdk-container');\r\n            if (chatWidget) {\r\n                chatWidget.parentElement.removeChild(chatWidget);\r\n            }\r\n            clientRef.current = null;\r\n        };\r\n    }, []);\r\n\r\n    return null;\r\n};\r\n\r\nexport default CozeChat;"],"mappings":";AAAA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;;AAEhD;AACA,MAAMC,WAAW,GAAG,qBAAqB;AACzC,MAAMC,mBAAmB,GAAG,sEAAsE;AAClG,MAAMC,cAAc,GAAG,qBAAqB;AAC5C;AACA,MAAMC,gBAAgB,GAAG,uBAAuB;AAEhD,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAMC,SAAS,GAAGP,MAAM,CAAC,IAAI,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACZ;IACAS,YAAY,CAACC,UAAU,CAACL,gBAAgB,CAAC;IAEzC,MAAMM,cAAc,GAAGA,CAAA,KAAM;MACzB,IAAIC,MAAM,CAACC,UAAU,IAAI,CAACL,SAAS,CAACM,OAAO,EAAE;QACzCN,SAAS,CAACM,OAAO,GAAG,IAAIF,MAAM,CAACC,UAAU,CAACE,aAAa,CAAC;UACpDC,MAAM,EAAE;YACJC,MAAM,EAAEf;UACZ,CAAC;UACDgB,cAAc,EAAE;YACZC,KAAK,EAAE,sBAAsB;YAC7BC,WAAW,EAAE;UACjB,CAAC;UACDC,IAAI,EAAE;YACFC,IAAI,EAAE,OAAO;YACbC,KAAK,EAAEpB,mBAAmB;YAC1BqB,cAAc,EAAEA,CAAA,KAAMC,OAAO,CAACC,OAAO,CAACvB,mBAAmB;UAC7D;QACJ,CAAC,CAAC;MACN;IACJ,CAAC;IAED,MAAMwB,UAAU,GAAGA,CAAA,KAAM;MACrB,IAAIC,QAAQ,CAACC,cAAc,CAACzB,cAAc,CAAC,EAAE;QACzCO,cAAc,CAAC,CAAC;QAChB;MACJ;MACA,MAAMmB,MAAM,GAAGF,QAAQ,CAACG,aAAa,CAAC,QAAQ,CAAC;MAC/CD,MAAM,CAACE,EAAE,GAAG5B,cAAc;MAC1B0B,MAAM,CAACG,GAAG,GAAG,oGAAoG;MACjHH,MAAM,CAACI,KAAK,GAAG,IAAI;MACnBJ,MAAM,CAACK,MAAM,GAAGxB,cAAc;MAC9BiB,QAAQ,CAACQ,IAAI,CAACC,WAAW,CAACP,MAAM,CAAC;IACrC,CAAC;IAEDH,UAAU,CAAC,CAAC;IAEZ,OAAO,MAAM;MACT,IAAInB,SAAS,CAACM,OAAO,IAAI,OAAON,SAAS,CAACM,OAAO,CAACwB,OAAO,KAAK,UAAU,EAAE;QACtE9B,SAAS,CAACM,OAAO,CAACwB,OAAO,CAAC,CAAC;MAC/B;MACA,MAAMC,UAAU,GAAGX,QAAQ,CAACY,aAAa,CAAC,yBAAyB,CAAC;MACpE,IAAID,UAAU,EAAE;QACZA,UAAU,CAACE,aAAa,CAACC,WAAW,CAACH,UAAU,CAAC;MACpD;MACA/B,SAAS,CAACM,OAAO,GAAG,IAAI;IAC5B,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO,IAAI;AACf,CAAC;AAACP,EAAA,CAtDID,QAAQ;AAAAqC,EAAA,GAARrC,QAAQ;AAwDd,eAAeA,QAAQ;AAAC,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}