{"ast":null,"code":"var _s = $RefreshSig$();\n// src/components/CozeChat.js\n\nimport React, { useEffect, useRef } from 'react';\n\n// --- Hằng số ---\nconst COZE_BOT_ID = '7564406577911463952';\nconst YOUR_COZE_PAT_TOKEN = 'pat_FrrZbPVDVnwl97NleYEMsc9RxKvggAuykeygC0NCI9nSB1ltKbRQD3kGzve6vjgq';\nconst COZE_SCRIPT_ID = 'coze-web-sdk-script';\nconst CozeChat = () => {\n  _s();\n  const clientRef = useRef(null);\n  useEffect(() => {\n    const initializeChat = () => {\n      if (window.CozeWebSDK && !clientRef.current) {\n        // --- ĐÂY LÀ THAY ĐỔI QUAN TRỌNG ---\n        // Tạo một ID người dùng ngẫu nhiên mỗi lần tải trang\n        const randomUserId = `user_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n        clientRef.current = new window.CozeWebSDK.WebChatClient({\n          config: {\n            bot_id: COZE_BOT_ID,\n            // Cung cấp ID người dùng ngẫu nhiên này cho SDK\n            user_id: randomUserId\n          },\n          componentProps: {\n            title: 'LandingHub Assistant',\n            description: 'Trợ lý AI của bạn'\n          },\n          auth: {\n            type: 'token',\n            token: YOUR_COZE_PAT_TOKEN,\n            onRefreshToken: () => Promise.resolve(YOUR_COZE_PAT_TOKEN)\n          }\n        });\n      }\n    };\n    const loadScript = () => {\n      if (document.getElementById(COZE_SCRIPT_ID)) {\n        initializeChat();\n        return;\n      }\n      const script = document.createElement('script');\n      script.id = COZE_SCRIPT_ID;\n      script.src = \"https://sf-cdn.coze.com/obj/unpkg-va/flow-platform/chat-app-sdk/1.2.0-beta.6/libs/oversea/index.js\";\n      script.async = true;\n      script.onload = initializeChat;\n      document.body.appendChild(script);\n    };\n    loadScript();\n    return () => {\n      if (clientRef.current && typeof clientRef.current.destroy === 'function') {\n        clientRef.current.destroy();\n      }\n      const chatWidget = document.querySelector('.web-chat-sdk-container');\n      if (chatWidget) {\n        chatWidget.parentElement.removeChild(chatWidget);\n      }\n      clientRef.current = null;\n    };\n  }, []);\n  return null;\n};\n_s(CozeChat, \"PMID0r5nDf9+pnMAo/w74pBuAKA=\");\n_c = CozeChat;\nexport default CozeChat;\nvar _c;\n$RefreshReg$(_c, \"CozeChat\");","map":{"version":3,"names":["React","useEffect","useRef","COZE_BOT_ID","YOUR_COZE_PAT_TOKEN","COZE_SCRIPT_ID","CozeChat","_s","clientRef","initializeChat","window","CozeWebSDK","current","randomUserId","Date","now","Math","random","toString","substring","WebChatClient","config","bot_id","user_id","componentProps","title","description","auth","type","token","onRefreshToken","Promise","resolve","loadScript","document","getElementById","script","createElement","id","src","async","onload","body","appendChild","destroy","chatWidget","querySelector","parentElement","removeChild","_c","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/CozeChat.js"],"sourcesContent":["// src/components/CozeChat.js\r\n\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\n// --- Hằng số ---\r\nconst COZE_BOT_ID = '7564406577911463952';\r\nconst YOUR_COZE_PAT_TOKEN = 'pat_FrrZbPVDVnwl97NleYEMsc9RxKvggAuykeygC0NCI9nSB1ltKbRQD3kGzve6vjgq';\r\nconst COZE_SCRIPT_ID = 'coze-web-sdk-script';\r\n\r\nconst CozeChat = () => {\r\n    const clientRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const initializeChat = () => {\r\n            if (window.CozeWebSDK && !clientRef.current) {\r\n\r\n                // --- ĐÂY LÀ THAY ĐỔI QUAN TRỌNG ---\r\n                // Tạo một ID người dùng ngẫu nhiên mỗi lần tải trang\r\n                const randomUserId = `user_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\r\n\r\n                clientRef.current = new window.CozeWebSDK.WebChatClient({\r\n                    config: {\r\n                        bot_id: COZE_BOT_ID,\r\n                        // Cung cấp ID người dùng ngẫu nhiên này cho SDK\r\n                        user_id: randomUserId,\r\n                    },\r\n                    componentProps: {\r\n                        title: 'LandingHub Assistant',\r\n                        description: 'Trợ lý AI của bạn',\r\n                    },\r\n                    auth: {\r\n                        type: 'token',\r\n                        token: YOUR_COZE_PAT_TOKEN,\r\n                        onRefreshToken: () => Promise.resolve(YOUR_COZE_PAT_TOKEN),\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        const loadScript = () => {\r\n            if (document.getElementById(COZE_SCRIPT_ID)) {\r\n                initializeChat();\r\n                return;\r\n            }\r\n            const script = document.createElement('script');\r\n            script.id = COZE_SCRIPT_ID;\r\n            script.src = \"https://sf-cdn.coze.com/obj/unpkg-va/flow-platform/chat-app-sdk/1.2.0-beta.6/libs/oversea/index.js\";\r\n            script.async = true;\r\n            script.onload = initializeChat;\r\n            document.body.appendChild(script);\r\n        };\r\n\r\n        loadScript();\r\n\r\n        return () => {\r\n            if (clientRef.current && typeof clientRef.current.destroy === 'function') {\r\n                clientRef.current.destroy();\r\n            }\r\n            const chatWidget = document.querySelector('.web-chat-sdk-container');\r\n            if (chatWidget) {\r\n                chatWidget.parentElement.removeChild(chatWidget);\r\n            }\r\n            clientRef.current = null;\r\n        };\r\n    }, []);\r\n\r\n    return null;\r\n};\r\n\r\nexport default CozeChat;"],"mappings":";AAAA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;;AAEhD;AACA,MAAMC,WAAW,GAAG,qBAAqB;AACzC,MAAMC,mBAAmB,GAAG,sEAAsE;AAClG,MAAMC,cAAc,GAAG,qBAAqB;AAE5C,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAMC,SAAS,GAAGN,MAAM,CAAC,IAAI,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACZ,MAAMQ,cAAc,GAAGA,CAAA,KAAM;MACzB,IAAIC,MAAM,CAACC,UAAU,IAAI,CAACH,SAAS,CAACI,OAAO,EAAE;QAEzC;QACA;QACA,MAAMC,YAAY,GAAG,QAAQC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;QAEvFX,SAAS,CAACI,OAAO,GAAG,IAAIF,MAAM,CAACC,UAAU,CAACS,aAAa,CAAC;UACpDC,MAAM,EAAE;YACJC,MAAM,EAAEnB,WAAW;YACnB;YACAoB,OAAO,EAAEV;UACb,CAAC;UACDW,cAAc,EAAE;YACZC,KAAK,EAAE,sBAAsB;YAC7BC,WAAW,EAAE;UACjB,CAAC;UACDC,IAAI,EAAE;YACFC,IAAI,EAAE,OAAO;YACbC,KAAK,EAAEzB,mBAAmB;YAC1B0B,cAAc,EAAEA,CAAA,KAAMC,OAAO,CAACC,OAAO,CAAC5B,mBAAmB;UAC7D;QACJ,CAAC,CAAC;MACN;IACJ,CAAC;IAED,MAAM6B,UAAU,GAAGA,CAAA,KAAM;MACrB,IAAIC,QAAQ,CAACC,cAAc,CAAC9B,cAAc,CAAC,EAAE;QACzCI,cAAc,CAAC,CAAC;QAChB;MACJ;MACA,MAAM2B,MAAM,GAAGF,QAAQ,CAACG,aAAa,CAAC,QAAQ,CAAC;MAC/CD,MAAM,CAACE,EAAE,GAAGjC,cAAc;MAC1B+B,MAAM,CAACG,GAAG,GAAG,oGAAoG;MACjHH,MAAM,CAACI,KAAK,GAAG,IAAI;MACnBJ,MAAM,CAACK,MAAM,GAAGhC,cAAc;MAC9ByB,QAAQ,CAACQ,IAAI,CAACC,WAAW,CAACP,MAAM,CAAC;IACrC,CAAC;IAEDH,UAAU,CAAC,CAAC;IAEZ,OAAO,MAAM;MACT,IAAIzB,SAAS,CAACI,OAAO,IAAI,OAAOJ,SAAS,CAACI,OAAO,CAACgC,OAAO,KAAK,UAAU,EAAE;QACtEpC,SAAS,CAACI,OAAO,CAACgC,OAAO,CAAC,CAAC;MAC/B;MACA,MAAMC,UAAU,GAAGX,QAAQ,CAACY,aAAa,CAAC,yBAAyB,CAAC;MACpE,IAAID,UAAU,EAAE;QACZA,UAAU,CAACE,aAAa,CAACC,WAAW,CAACH,UAAU,CAAC;MACpD;MACArC,SAAS,CAACI,OAAO,GAAG,IAAI;IAC5B,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO,IAAI;AACf,CAAC;AAACL,EAAA,CA1DID,QAAQ;AAAA2C,EAAA,GAAR3C,QAAQ;AA4Dd,eAAeA,QAAQ;AAAC,IAAA2C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}