{"ast":null,"code":"/** * RESPONSIVE UTILS - FIXED VERSION */\n\n// 1. ✅ FIXED: Scale Factor\nexport const getScaleFactor = (fromMode, toMode) => {\n  const widths = {\n    desktop: 1200,\n    tablet: 768,\n    mobile: 375\n  };\n  return widths[toMode] / widths[fromMode];\n};\n\n// 2. ✅ FIXED: Size theo MODE riêng biệt\nexport const autoScaleSize = (element, fromMode, toMode) => {\n  var _element$size3, _element$size3$fromMo, _element$size4, _element$size4$fromMo;\n  if (element.type === 'section') {\n    var _element$size, _element$size$fromMod;\n    return {\n      width: toMode === 'mobile' ? 375 : toMode === 'tablet' ? 768 : 1200,\n      height: ((_element$size = element.size) === null || _element$size === void 0 ? void 0 : (_element$size$fromMod = _element$size[fromMode]) === null || _element$size$fromMod === void 0 ? void 0 : _element$size$fromMod.height) * getScaleFactor(fromMode, toMode) || 400\n    };\n  }\n  if (element.type === 'popup') {\n    var _element$size2, _element$size2$fromMo;\n    return {\n      width: toMode === 'mobile' ? 340 : toMode === 'tablet' ? 600 : 600,\n      height: ((_element$size2 = element.size) === null || _element$size2 === void 0 ? void 0 : (_element$size2$fromMo = _element$size2[fromMode]) === null || _element$size2$fromMo === void 0 ? void 0 : _element$size2$fromMo.height) * getScaleFactor(fromMode, toMode) || 400\n    };\n  }\n  const baseW = ((_element$size3 = element.size) === null || _element$size3 === void 0 ? void 0 : (_element$size3$fromMo = _element$size3[fromMode]) === null || _element$size3$fromMo === void 0 ? void 0 : _element$size3$fromMo.width) || 200;\n  const baseH = ((_element$size4 = element.size) === null || _element$size4 === void 0 ? void 0 : (_element$size4$fromMo = _element$size4[fromMode]) === null || _element$size4$fromMo === void 0 ? void 0 : _element$size4$fromMo.height) || 50;\n  const scaledW = Math.round(baseW * getScaleFactor(fromMode, toMode));\n  const scaledH = Math.round(baseH * getScaleFactor(fromMode, toMode));\n  const minSizes = {\n    button: {\n      w: 80,\n      h: 32\n    },\n    icon: {\n      w: 24,\n      h: 24\n    },\n    image: {\n      w: 100,\n      h: 100\n    },\n    heading: {\n      w: 150,\n      h: 24\n    },\n    paragraph: {\n      w: 200,\n      h: 40\n    },\n    gallery: {\n      w: 300,\n      h: 200\n    }\n  };\n  const min = minSizes[element.type] || {\n    w: 100,\n    h: 40\n  };\n  return {\n    width: Math.max(Math.min(scaledW, toMode === 'mobile' ? 340 : 1200), min.w),\n    height: Math.max(scaledH, min.h)\n  };\n};\n\n// 3. ✅ FIXED: Position sync đúng\nexport const autoScalePosition = (element, fromMode, toMode, newSize) => {\n  var _element$position;\n  const fromPos = ((_element$position = element.position) === null || _element$position === void 0 ? void 0 : _element$position[fromMode]) || {\n    x: 0,\n    y: 0,\n    z: 1\n  };\n  const scale = getScaleFactor(fromMode, toMode);\n  if (element.type === 'section') return {\n    x: 0,\n    y: 0,\n    z: fromPos.z || 1\n  };\n  if (element.type === 'popup') return {\n    x: toMode === 'mobile' ? 17.5 : toMode === 'tablet' ? 84 : fromPos.x,\n    // Center\n    y: fromPos.y * scale,\n    z: 1001\n  };\n  const canvasW = toMode === 'mobile' ? 375 : toMode === 'tablet' ? 768 : 1200;\n  let x = Math.round(fromPos.x * scale);\n  let y = Math.round(fromPos.y * scale);\n\n  // Prevent overflow\n  x = Math.max(0, Math.min(x, canvasW - ((newSize === null || newSize === void 0 ? void 0 : newSize.width) || 200) - 10));\n  y = Math.max(0, y);\n  return {\n    x,\n    y,\n    z: fromPos.z || 1\n  };\n};\n\n// 4. ✅ FIXED: Styles scale KHÔNG override\nexport const autoScaleStyles = (styles, fromMode, toMode) => {\n  if (!styles) return {};\n  const scale = getScaleFactor(fromMode, toMode);\n  const result = {\n    ...styles\n  };\n  const props = ['fontSize', 'padding', 'margin', 'borderRadius', 'gap'];\n  props.forEach(prop => {\n    if (result[prop]) {\n      const val = result[prop];\n      if (typeof val === 'string') {\n        const num = parseFloat(val);\n        if (!isNaN(num)) {\n          const scaled = Math.max(Math.round(num * scale * 10) / 10, prop.includes('font') ? 10 : 4);\n          result[prop] = `${scaled}px`;\n        }\n      }\n    }\n  });\n  return result;\n};\n\n// 5. ✅ FIXED: ComponentData mobile-friendly\nexport const autoScaleComponentData = (data, toMode) => {\n  if (!data || toMode === 'desktop') return data;\n  const result = {\n    ...data\n  };\n  if (toMode === 'mobile') {\n    result.columns = 1;\n    result.gridTemplateColumns = '1fr';\n    result.gap = '8px';\n  } else if (toMode === 'tablet') {\n    result.columns = Math.min(data.columns || 3, 2);\n    result.gridTemplateColumns = 'repeat(2, 1fr)';\n  }\n  return result;\n};\n\n// 6. ✅ FIXED MAIN SYNC - KHÔNG recursive loop\nexport const syncElementBetweenModes = (element, changedMode) => {\n  var _result$children;\n  const modes = ['desktop', 'tablet', 'mobile'];\n  const result = {\n    ...element\n  };\n\n  // ✅ INITIALIZE size/position nếu chưa có\n  if (!result.size) result.size = {};\n  if (!result.position) result.position = {};\n  modes.forEach(mode => {\n    if (mode !== changedMode) {\n      const scaledSize = autoScaleSize(result, changedMode, mode);\n      const scaledPos = autoScalePosition(result, changedMode, mode, scaledSize);\n\n      // ✅ LƯU THEO MODE RIÊNG BIỆT\n      result.size[mode] = scaledSize;\n      result.position[mode] = scaledPos;\n\n      // Styles theo mode\n      result[`styles_${mode}`] = autoScaleStyles(result.styles || {}, changedMode, mode);\n      result[`componentData_${mode}`] = autoScaleComponentData(result.componentData, mode);\n    }\n  });\n\n  // ✅ SYNC CHILDREN - chỉ 1 level (prevent loop)\n  if ((_result$children = result.children) !== null && _result$children !== void 0 && _result$children.length) {\n    result.children = result.children.map(child => ({\n      ...child,\n      size: child.size || result.size[changedMode],\n      position: child.position || result.position[changedMode]\n    }));\n  }\n  return result;\n};\n\n// 7. ✅ FIXED getResponsiveValues - CLEAN RETURN\nexport const getResponsiveValues = (element, viewMode) => {\n  var _element$size5, _element$position2;\n  const size = ((_element$size5 = element.size) === null || _element$size5 === void 0 ? void 0 : _element$size5[viewMode]) || {\n    width: element.type === 'section' ? viewMode === 'mobile' ? 375 : viewMode === 'tablet' ? 768 : 1200 : 200,\n    height: 400\n  };\n  const position = ((_element$position2 = element.position) === null || _element$position2 === void 0 ? void 0 : _element$position2[viewMode]) || {\n    x: 0,\n    y: 0,\n    z: 1\n  };\n\n  // ✅ FIXED: Styles KHÔNG override\n  const styles = element[`styles_${viewMode}`] || element.styles || {};\n\n  // ✅ FIXED: ComponentData riêng mode\n  let componentData = element[`componentData_${viewMode}`] || element.componentData || {};\n\n  // ✅ FIXED BACKGROUND SYNC\n  if (styles.backgroundImage && !componentData.backgroundImage) {\n    componentData = {\n      ...componentData,\n      backgroundType: 'image',\n      backgroundImage: styles.backgroundImage.replace(/^url\\([\"']?([^\"']+)[\"']?\\)$/, '$1'),\n      backgroundSize: styles.backgroundSize || 'cover'\n    };\n  }\n  return {\n    size,\n    position,\n    styles,\n    componentData\n  };\n};\n\n// 8. ✅ FIXED Initialize\nexport const initializeResponsiveData = pageData => ({\n  ...pageData,\n  elements: pageData.elements.map(el => syncElementBetweenModes(el, 'desktop'))\n});\nexport default {\n  getScaleFactor,\n  autoScaleSize,\n  autoScalePosition,\n  autoScaleStyles,\n  autoScaleComponentData,\n  syncElementBetweenModes,\n  getResponsiveValues,\n  initializeResponsiveData\n};","map":{"version":3,"names":["getScaleFactor","fromMode","toMode","widths","desktop","tablet","mobile","autoScaleSize","element","_element$size3","_element$size3$fromMo","_element$size4","_element$size4$fromMo","type","_element$size","_element$size$fromMod","width","height","size","_element$size2","_element$size2$fromMo","baseW","baseH","scaledW","Math","round","scaledH","minSizes","button","w","h","icon","image","heading","paragraph","gallery","min","max","autoScalePosition","newSize","_element$position","fromPos","position","x","y","z","scale","canvasW","autoScaleStyles","styles","result","props","forEach","prop","val","num","parseFloat","isNaN","scaled","includes","autoScaleComponentData","data","columns","gridTemplateColumns","gap","syncElementBetweenModes","changedMode","_result$children","modes","mode","scaledSize","scaledPos","componentData","children","length","map","child","getResponsiveValues","viewMode","_element$size5","_element$position2","backgroundImage","backgroundType","replace","backgroundSize","initializeResponsiveData","pageData","elements","el"],"sources":["F:/landinghub-iconic/apps/web/src/utils/responsiveSync.js"],"sourcesContent":["/** * RESPONSIVE UTILS - FIXED VERSION */\r\n\r\n// 1. ✅ FIXED: Scale Factor\r\nexport const getScaleFactor = (fromMode, toMode) => {\r\n    const widths = { desktop: 1200, tablet: 768, mobile: 375 };\r\n    return widths[toMode] / widths[fromMode];\r\n};\r\n\r\n// 2. ✅ FIXED: Size theo MODE riêng biệt\r\nexport const autoScaleSize = (element, fromMode, toMode) => {\r\n    if (element.type === 'section') {\r\n        return {\r\n            width: toMode === 'mobile' ? 375 : toMode === 'tablet' ? 768 : 1200,\r\n            height: element.size?.[fromMode]?.height * getScaleFactor(fromMode, toMode) || 400\r\n        };\r\n    }\r\n\r\n    if (element.type === 'popup') {\r\n        return {\r\n            width: toMode === 'mobile' ? 340 : toMode === 'tablet' ? 600 : 600,\r\n            height: element.size?.[fromMode]?.height * getScaleFactor(fromMode, toMode) || 400\r\n        };\r\n    }\r\n\r\n    const baseW = element.size?.[fromMode]?.width || 200;\r\n    const baseH = element.size?.[fromMode]?.height || 50;\r\n    const scaledW = Math.round(baseW * getScaleFactor(fromMode, toMode));\r\n    const scaledH = Math.round(baseH * getScaleFactor(fromMode, toMode));\r\n\r\n    const minSizes = {\r\n        button: { w: 80, h: 32 }, icon: { w: 24, h: 24 },\r\n        image: { w: 100, h: 100 }, heading: { w: 150, h: 24 },\r\n        paragraph: { w: 200, h: 40 }, gallery: { w: 300, h: 200 }\r\n    };\r\n    const min = minSizes[element.type] || { w: 100, h: 40 };\r\n\r\n    return {\r\n        width: Math.max(Math.min(scaledW, toMode === 'mobile' ? 340 : 1200), min.w),\r\n        height: Math.max(scaledH, min.h)\r\n    };\r\n};\r\n\r\n// 3. ✅ FIXED: Position sync đúng\r\nexport const autoScalePosition = (element, fromMode, toMode, newSize) => {\r\n    const fromPos = element.position?.[fromMode] || { x: 0, y: 0, z: 1 };\r\n    const scale = getScaleFactor(fromMode, toMode);\r\n\r\n    if (element.type === 'section') return { x: 0, y: 0, z: fromPos.z || 1 };\r\n    if (element.type === 'popup') return {\r\n        x: toMode === 'mobile' ? 17.5 : toMode === 'tablet' ? 84 : fromPos.x, // Center\r\n        y: fromPos.y * scale,\r\n        z: 1001\r\n    };\r\n\r\n    const canvasW = toMode === 'mobile' ? 375 : toMode === 'tablet' ? 768 : 1200;\r\n    let x = Math.round(fromPos.x * scale);\r\n    let y = Math.round(fromPos.y * scale);\r\n\r\n    // Prevent overflow\r\n    x = Math.max(0, Math.min(x, canvasW - (newSize?.width || 200) - 10));\r\n    y = Math.max(0, y);\r\n\r\n    return { x, y, z: fromPos.z || 1 };\r\n};\r\n\r\n// 4. ✅ FIXED: Styles scale KHÔNG override\r\nexport const autoScaleStyles = (styles, fromMode, toMode) => {\r\n    if (!styles) return {};\r\n    const scale = getScaleFactor(fromMode, toMode);\r\n    const result = { ...styles };\r\n\r\n    const props = ['fontSize', 'padding', 'margin', 'borderRadius', 'gap'];\r\n    props.forEach(prop => {\r\n        if (result[prop]) {\r\n            const val = result[prop];\r\n            if (typeof val === 'string') {\r\n                const num = parseFloat(val);\r\n                if (!isNaN(num)) {\r\n                    const scaled = Math.max(\r\n                        Math.round(num * scale * 10) / 10,\r\n                        prop.includes('font') ? 10 : 4\r\n                    );\r\n                    result[prop] = `${scaled}px`;\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    return result;\r\n};\r\n\r\n// 5. ✅ FIXED: ComponentData mobile-friendly\r\nexport const autoScaleComponentData = (data, toMode) => {\r\n    if (!data || toMode === 'desktop') return data;\r\n    const result = { ...data };\r\n\r\n    if (toMode === 'mobile') {\r\n        result.columns = 1;\r\n        result.gridTemplateColumns = '1fr';\r\n        result.gap = '8px';\r\n    } else if (toMode === 'tablet') {\r\n        result.columns = Math.min(data.columns || 3, 2);\r\n        result.gridTemplateColumns = 'repeat(2, 1fr)';\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n// 6. ✅ FIXED MAIN SYNC - KHÔNG recursive loop\r\nexport const syncElementBetweenModes = (element, changedMode) => {\r\n    const modes = ['desktop', 'tablet', 'mobile'];\r\n    const result = { ...element };\r\n\r\n    // ✅ INITIALIZE size/position nếu chưa có\r\n    if (!result.size) result.size = {};\r\n    if (!result.position) result.position = {};\r\n\r\n    modes.forEach(mode => {\r\n        if (mode !== changedMode) {\r\n            const scaledSize = autoScaleSize(result, changedMode, mode);\r\n            const scaledPos = autoScalePosition(result, changedMode, mode, scaledSize);\r\n\r\n            // ✅ LƯU THEO MODE RIÊNG BIỆT\r\n            result.size[mode] = scaledSize;\r\n            result.position[mode] = scaledPos;\r\n\r\n            // Styles theo mode\r\n            result[`styles_${mode}`] = autoScaleStyles(result.styles || {}, changedMode, mode);\r\n            result[`componentData_${mode}`] = autoScaleComponentData(result.componentData, mode);\r\n        }\r\n    });\r\n\r\n    // ✅ SYNC CHILDREN - chỉ 1 level (prevent loop)\r\n    if (result.children?.length) {\r\n        result.children = result.children.map(child => ({\r\n            ...child,\r\n            size: child.size || result.size[changedMode],\r\n            position: child.position || result.position[changedMode]\r\n        }));\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n// 7. ✅ FIXED getResponsiveValues - CLEAN RETURN\r\nexport const getResponsiveValues = (element, viewMode) => {\r\n    const size = element.size?.[viewMode] || {\r\n        width: element.type === 'section' ?\r\n            (viewMode === 'mobile' ? 375 : viewMode === 'tablet' ? 768 : 1200) : 200,\r\n        height: 400\r\n    };\r\n\r\n    const position = element.position?.[viewMode] || { x: 0, y: 0, z: 1 };\r\n\r\n    // ✅ FIXED: Styles KHÔNG override\r\n    const styles = element[`styles_${viewMode}`] || element.styles || {};\r\n\r\n    // ✅ FIXED: ComponentData riêng mode\r\n    let componentData = element[`componentData_${viewMode}`] || element.componentData || {};\r\n\r\n    // ✅ FIXED BACKGROUND SYNC\r\n    if (styles.backgroundImage && !componentData.backgroundImage) {\r\n        componentData = {\r\n            ...componentData,\r\n            backgroundType: 'image',\r\n            backgroundImage: styles.backgroundImage.replace(/^url\\([\"']?([^\"']+)[\"']?\\)$/, '$1'),\r\n            backgroundSize: styles.backgroundSize || 'cover'\r\n        };\r\n    }\r\n\r\n    return {\r\n        size,\r\n        position,\r\n        styles,\r\n        componentData\r\n    };\r\n};\r\n\r\n// 8. ✅ FIXED Initialize\r\nexport const initializeResponsiveData = (pageData) => ({\r\n    ...pageData,\r\n    elements: pageData.elements.map(el => syncElementBetweenModes(el, 'desktop'))\r\n});\r\n\r\nexport default {\r\n    getScaleFactor, autoScaleSize, autoScalePosition, autoScaleStyles,\r\n    autoScaleComponentData, syncElementBetweenModes, getResponsiveValues,\r\n    initializeResponsiveData\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}