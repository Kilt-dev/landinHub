{"ast":null,"code":"// ==================== EVENT RUNTIME GENERATOR ====================\n\n/**\r\n * Generate runtime script ƒë·ªÉ x·ª≠ l√Ω events trong HTML tƒ©nh\r\n * @param {Array} events - Danh s√°ch events t·ª´ pageData\r\n * @param {Array} popups - Danh s√°ch popup elements\r\n * @returns {string} - JavaScript code\r\n */\nconst generateEventRuntime = (events, popups) => {\n  return `\n    // Landing Page Builder Runtime v1.1\n    (function() {\n        'use strict';\n        \n        window.LPB = window.LPB || {};\n        \n        // ========== POPUP MANAGER ==========\n        LPB.popups = {\n            active: new Set(),\n            \n            open: function(popupId, data) {\n                const popup = document.getElementById(popupId);\n                if (!popup) {\n                    console.error('[LPB] Popup not found:', popupId);\n                    return;\n                }\n                \n                if (data && data.html) {\n                    const content = popup.querySelector('.lpb-popup-body');\n                    if (content) content.innerHTML = data.html;\n                }\n                \n                popup.classList.add('lpb-popup-active');\n                document.body.style.overflow = 'hidden';\n                this.active.add(popupId);\n                \n                if (window.gtag) {\n                    gtag('event', 'popup_open', {\n                        event_category: 'Engagement',\n                        event_label: popupId\n                    });\n                }\n            },\n            \n            close: function(popupId) {\n                const popup = document.getElementById(popupId);\n                if (popup) {\n                    popup.classList.remove('lpb-popup-active');\n                    this.active.delete(popupId);\n                    if (this.active.size === 0) {\n                        document.body.style.overflow = '';\n                    }\n                }\n            },\n            \n            closeAll: function() {\n                this.active.forEach(id => this.close(id));\n            }\n        };\n        \n        // ========== API MANAGER ==========\n        LPB.api = {\n            cache: new Map(),\n            \n            getCacheKey: function(endpoint, params) {\n                return endpoint + JSON.stringify(params || {});\n            },\n            \n            fetch: async function(endpoint, options = {}) {\n                const cacheKey = this.getCacheKey(endpoint, options.params);\n                \n                if (this.cache.has(cacheKey)) {\n                    const cached = this.cache.get(cacheKey);\n                    const now = Date.now();\n                    const TTL = options.ttl || 5 * 60 * 1000;\n                    if (now - cached.timestamp < TTL) {\n                        console.log('[LPB] Cache hit:', endpoint);\n                        return cached.data;\n                    }\n                }\n                \n                try {\n                    console.log('[LPB] Fetching:', endpoint);\n                    const response = await fetch(endpoint, {\n                        method: options.method || 'GET',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            ...options.headers\n                        },\n                        body: options.data ? JSON.stringify(options.data) : undefined\n                    });\n                    \n                    if (!response.ok) {\n                        throw new Error(\\`HTTP \\${response.status}: \\${response.statusText}\\`);\n                    }\n                    \n                    const data = await response.json();\n                    this.cache.set(cacheKey, {\n                        data: data,\n                        timestamp: Date.now()\n                    });\n                    return data;\n                } catch (error) {\n                    console.error('[LPB] API Error:', error);\n                    throw error;\n                }\n            },\n            \n            clearCache: function(endpoint) {\n                if (endpoint) {\n                    for (let key of this.cache.keys()) {\n                        if (key.startsWith(endpoint)) {\n                            this.cache.delete(key);\n                        }\n                    }\n                } else {\n                    this.cache.clear();\n                }\n            }\n        };\n        \n        // ========== EVENT HANDLER ==========\n        LPB.handleEvent = async function(config) {\n            const { type } = config;\n            \n            try {\n                switch(type) {\n                    case 'openPopup':\n                        if (!config.popupId) {\n                            console.error('[LPB] Missing popupId');\n                            return;\n                        }\n                        this.popups.open(config.popupId, config.data);\n                        break;\n                        \n                    case 'closePopup':\n                        const targetPopupId = config.popupId || config.elementId;\n                        if (!targetPopupId) {\n                            console.error('[LPB] Missing popupId');\n                            return;\n                        }\n                        this.popups.close(targetPopupId);\n                        break;\n                        \n                    case 'triggerApi':\n                        if (!config.apiUrl) {\n                            console.error('[LPB] Missing apiUrl');\n                            return;\n                        }\n                        const data = await this.api.fetch(config.apiUrl, {\n                            method: config.method || 'GET',\n                            params: config.params,\n                            data: config.data\n                        });\n                        if (config.updateTarget) {\n                            const target = document.getElementById(config.updateTarget);\n                            if (target && data.html) {\n                                target.innerHTML = data.html;\n                            }\n                        }\n                        break;\n                        \n                    case 'both':\n                        this.popups.open(config.popupId, { \n                            html: '<div style=\"text-align:center;padding:40px;\"><div class=\"lpb-spinner\"></div><p>ƒêang t·∫£i...</p></div>' \n                        });\n                        const apiData = await this.api.fetch(config.apiUrl, {\n                            method: config.method || 'GET',\n                            params: config.params\n                        });\n                        this.popups.open(config.popupId, { html: apiData.html || JSON.stringify(apiData) });\n                        break;\n                        \n                    case 'navigate':\n                        if (!config.url) {\n                            console.error('[LPB] Missing url');\n                            return;\n                        }\n                        if (config.newTab) {\n                            window.open(config.url, '_blank');\n                        } else {\n                            window.location.href = config.url;\n                        }\n                        break;\n                        \n                    case 'scrollToSection':\n                        if (!config.sectionId) {\n                            console.error('[LPB] Missing sectionId');\n                            return;\n                        }\n                        const section = document.querySelector(\\`[data-element-id=\"\\${config.sectionId}\"]\\`);\n                        if (section) {\n                            section.scrollIntoView({ \n                                behavior: config.smooth !== false ? 'smooth' : 'auto',\n                                block: 'start'\n                            });\n                        } else {\n                            console.error('[LPB] Section not found:', config.sectionId);\n                        }\n                        break;\n                        \n                    case 'submitForm':\n                        if (!config.apiUrl) {\n                            console.error('[LPB] Missing apiUrl');\n                            return;\n                        }\n                        console.log('[LPB] Form submit to:', config.apiUrl);\n                        break;\n                        \n                    default:\n                        console.warn('[LPB] Unknown event type:', type);\n                }\n            } catch (error) {\n                console.error('[LPB] Event handling error:', error);\n                alert('C√≥ l·ªói x·∫£y ra: ' + error.message);\n            }\n        };\n        \n        // ========== AUTO-BIND EVENTS ==========\n        const eventsConfig = ${JSON.stringify(events)};\n        \n        function bindEvents() {\n            console.log('[LPB] Initializing events...', eventsConfig.length);\n            \n            eventsConfig.forEach(config => {\n                const element = document.getElementById(config.elementId);\n                if (!element) {\n                    return; // Silently skip missing elements\n                }\n                \n                if (config.events.onClick && config.events.onClick.type !== 'none') {\n                    element.addEventListener('click', function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        LPB.handleEvent(config.events.onClick);\n                    });\n                    element.style.cursor = 'pointer';\n                }\n                \n                if (config.events.onClick?.params?.apiConfig?.preload) {\n                    element.addEventListener('mouseenter', function() {\n                        LPB.api.fetch(\n                            config.events.onClick.params.apiConfig.endpoint,\n                            config.events.onClick.params.apiConfig\n                        ).catch(() => {});\n                    }, { once: true });\n                }\n                \n                if (config.events.onHover) {\n                    const hoverClass = config.events.onHover.className;\n                    if (hoverClass) {\n                        element.addEventListener('mouseenter', function() {\n                            this.classList.add(hoverClass);\n                        });\n                        element.addEventListener('mouseleave', function() {\n                            this.classList.remove(hoverClass);\n                        });\n                    }\n                }\n            });\n            \n            console.log('[LPB] Events initialized!');\n        }\n        \n        // Bind events immediately and fallback to DOMContentLoaded\n        bindEvents();\n        if (document.readyState === 'loading') {\n            document.addEventListener('DOMContentLoaded', bindEvents);\n        }\n        \n        // ========== ESC TO CLOSE POPUP ==========\n        document.addEventListener('keydown', function(e) {\n            if (e.key === 'Escape') {\n                LPB.popups.closeAll();\n            }\n        });\n        \n        console.log('[LPB] Runtime loaded');\n    })();\n    `;\n};\n\n/**\r\n * Extract t·∫•t c·∫£ events t·ª´ pageData elements\r\n * @param {Object} pageData - Page data object\r\n * @returns {Array} - Array of event configs\r\n */\nconst extractEvents = pageData => {\n  const events = [];\n  const processElement = (element, parentId = null) => {\n    var _element$componentDat;\n    const elementId = element.id;\n\n    // Ch·ªâ x·ª≠ l√Ω ph·∫ßn t·ª≠ hi·ªÉn th·ªã\n    if (element.visible === false) return;\n    if ((_element$componentDat = element.componentData) !== null && _element$componentDat !== void 0 && _element$componentDat.events) {\n      events.push({\n        elementId: elementId,\n        events: element.componentData.events,\n        type: element.type,\n        parentId: parentId\n      });\n    }\n    if (Array.isArray(element.children)) {\n      element.children.forEach(child => {\n        var _child$componentData;\n        if (child.visible !== false && (_child$componentData = child.componentData) !== null && _child$componentData !== void 0 && _child$componentData.events) {\n          events.push({\n            elementId: child.id,\n            events: child.componentData.events,\n            type: child.type,\n            parentId: elementId\n          });\n        }\n        if (Array.isArray(child.children)) {\n          processElement(child, child.id);\n        }\n      });\n    }\n  };\n  pageData.elements.forEach(element => {\n    processElement(element);\n  });\n  return events;\n};\n\n/**\r\n * Render t·∫•t c·∫£ popups th√†nh HTML\r\n * @param {Array} popups - Array of popup elements\r\n * @param {string} viewMode - Current view mode (desktop, tablet, mobile)\r\n * @returns {string} - HTML string\r\n */\nconst renderPopupsHTML = (popups, viewMode = 'desktop') => {\n  return popups.filter(popup => popup.visible !== false).map(popup => {\n    var _popup$responsiveStyl;\n    const {\n      id,\n      componentData = {},\n      styles = {},\n      size = {},\n      children = []\n    } = getResponsiveValues(popup, viewMode);\n    const responsiveStyles = ((_popup$responsiveStyl = popup.responsiveStyles) === null || _popup$responsiveStyl === void 0 ? void 0 : _popup$responsiveStyl[viewMode]) || {};\n    const combinedStyles = {\n      ...styles,\n      ...responsiveStyles\n    };\n    const childrenHTML = children.filter(child => child.visible !== false).map(child => renderElementHTML(child, true, viewMode)).join('');\n    return `\n                <div \n                    id=\"${id}\" \n                    class=\"lpb-popup\" \n                    data-element-id=\"${id}\"\n                    style=\"display:none;\"\n                >\n                    <div \n                        class=\"lpb-popup-overlay\" \n                        onclick=\"LPB.popups.close('${id}')\"\n                    ></div>\n                    <div \n                        class=\"lpb-popup-container\"\n                        style=\"\n                            width: ${size.width || 600}px;\n                            max-width: 90vw;\n                            min-height: ${size.height || 400}px;\n                            background: ${combinedStyles.background || componentData.background || 'rgba(255, 255, 255, 0.95)'};\n                            border-radius: ${combinedStyles.borderRadius || componentData.borderRadius || '12px'};\n                            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);\n                        \"\n                    >\n                        <div class=\"lpb-popup-header\">\n                            <h3 style=\"margin:0; font-size:16px; font-weight:600; color:#111827;\">\n                                ${componentData.title || 'Popup Title'}\n                            </h3>\n                            <button \n                                class=\"lpb-popup-close\" \n                                onclick=\"LPB.popups.close('${id}')\"\n                                aria-label=\"Close popup\"\n                            >\n                                ‚úï\n                            </button>\n                        </div>\n                        <div class=\"lpb-popup-body\" style=\"padding: ${componentData.padding || '20px'};\">\n                            ${childrenHTML || `<p style=\"color:#6b7280;\">${componentData.content || 'Popup content'}</p>`}\n                        </div>\n                    </div>\n                </div>\n            `;\n  }).join('\\n');\n};\n\n/**\r\n * Render m·ªôt element th√†nh HTML v·ªõi proper ID v√† responsive support\r\n * @param {Object} element - Element object\r\n * @param {boolean} isChild - Whether this is a child element\r\n * @param {string} viewMode - Current view mode (desktop, tablet, mobile)\r\n * @returns {string} - HTML string\r\n */\nconst renderElementHTML = (element, isChild = false, viewMode = 'desktop') => {\n  var _element$responsiveSt, _componentData$icon;\n  if (element.visible === false) return '';\n  const {\n    id,\n    type,\n    componentData = {},\n    styles = {},\n    size = {},\n    position = {}\n  } = getResponsiveValues(element, viewMode);\n  const responsiveStyles = ((_element$responsiveSt = element.responsiveStyles) === null || _element$responsiveSt === void 0 ? void 0 : _element$responsiveSt[viewMode]) || {};\n  const combinedStyles = {\n    ...styles,\n    ...responsiveStyles\n  };\n  const inlineStyles = Object.entries(combinedStyles).filter(([key]) => !key.startsWith(':') && !key.startsWith('@')).map(([key, value]) => {\n    const kebabKey = key.replace(/[A-Z]/g, m => `-${m.toLowerCase()}`);\n    return `${kebabKey}:${value}`;\n  }).join(';');\n  const baseAttrs = `\n        id=\"${id}\"\n        data-element-id=\"${id}\"\n        data-type=\"${type}\"\n        class=\"lpb-element lpb-${type}\"\n    `;\n  const positionStyles = isChild ? `\n        position: absolute;\n        left: ${position.x || 0}px;\n        top: ${position.y || 0}px;\n        width: ${size.width || 200}px;\n        height: ${size.height || 50}px;\n    ` : '';\n  switch (type) {\n    case 'section':\n      return renderSectionHTML(element, viewMode);\n    case 'button':\n      return `\n                <button \n                    ${baseAttrs}\n                    style=\"${inlineStyles}; ${positionStyles}\"\n                >\n                    ${componentData.content || 'Button'}\n                </button>\n            `;\n    case 'heading':\n      const HeadingTag = componentData.level || 'h2';\n      return `\n                <${HeadingTag} \n                    ${baseAttrs}\n                    style=\"${inlineStyles}; ${positionStyles}\"\n                >\n                    ${componentData.content || 'Heading'}\n                </${HeadingTag}>\n            `;\n    case 'paragraph':\n      return `\n                <p \n                    ${baseAttrs}\n                    style=\"${inlineStyles}; ${positionStyles}\"\n                >\n                    ${componentData.content || 'Paragraph'}\n                </p>\n            `;\n    case 'image':\n      return `\n                <img \n                    ${baseAttrs}\n                    src=\"${componentData.src || componentData.imageUrl || 'https://via.placeholder.com/150'}\"\n                    alt=\"${componentData.alt || 'Image'}\"\n                    style=\"${inlineStyles}; ${positionStyles}\"\n                />\n            `;\n    case 'icon':\n      const isSvg = (_componentData$icon = componentData.icon) === null || _componentData$icon === void 0 ? void 0 : _componentData$icon.startsWith('<svg');\n      return `\n                <div \n                    ${baseAttrs}\n                    style=\"${inlineStyles}; ${positionStyles}\"\n                    title=\"${componentData.title || ''}\"\n                >\n                    ${componentData.imageUrl ? `<img src=\"${componentData.imageUrl}\" alt=\"${componentData.title || 'Icon'}\" style=\"width:100%;height:100%;object-fit:contain;\" />` : isSvg ? componentData.icon : componentData.icon ? `<i class=\"${componentData.icon}\"></i>` : 'üì¶'}\n                </div>\n            `;\n    case 'gallery':\n      return renderGalleryHTML(element, isChild, viewMode);\n    default:\n      return `\n                <div \n                    ${baseAttrs}\n                    style=\"${inlineStyles}; ${positionStyles}\"\n                >\n                    ${componentData.content || type}\n                </div>\n            `;\n  }\n};\n\n/**\r\n * Render gallery element\r\n */\nconst renderGalleryHTML = (element, isChild, viewMode = 'desktop') => {\n  var _element$responsiveSt2;\n  if (element.visible === false) return '';\n  const {\n    id,\n    componentData = {},\n    styles = {},\n    size = {},\n    position = {}\n  } = getResponsiveValues(element, viewMode);\n  const responsiveStyles = ((_element$responsiveSt2 = element.responsiveStyles) === null || _element$responsiveSt2 === void 0 ? void 0 : _element$responsiveSt2[viewMode]) || {};\n  const combinedStyles = {\n    ...styles,\n    ...responsiveStyles\n  };\n  const positionStyles = isChild ? `\n        position: absolute;\n        left: ${position.x || 0}px;\n        top: ${position.y || 0}px;\n    ` : '';\n  const images = componentData.images || [];\n  return `\n        <div \n            id=\"${id}\"\n            data-element-id=\"${id}\"\n            data-type=\"gallery\"\n            class=\"lpb-element lpb-gallery\"\n            style=\"${positionStyles} width: ${size.width || 380}px; height: ${size.height || 300}px;\"\n        >\n            <div style=\"\n                display: ${combinedStyles.display || 'grid'};\n                grid-template-columns: ${combinedStyles.gridTemplateColumns || 'repeat(auto-fill, minmax(150px, 1fr))'};\n                gap: ${combinedStyles.gap || '10px'};\n                width: 100%;\n                height: 100%;\n            \">\n                ${images.map((imageUrl, index) => `\n                    <div style=\"\n                        position: relative;\n                        overflow: hidden;\n                        border-radius: ${combinedStyles.borderRadius || '8px'};\n                        aspect-ratio: 1 / 1;\n                    \">\n                        <img\n                            src=\"${imageUrl || 'https://via.placeholder.com/150'}\"\n                            alt=\"Gallery ${index + 1}\"\n                            style=\"\n                                width: 100%;\n                                height: 100%;\n                                object-fit: ${combinedStyles.objectFit || 'cover'};\n                                object-position: ${combinedStyles.objectPosition || 'center'};\n                            \"\n                            loading=\"lazy\"\n                        />\n                    </div>\n                `).join('')}\n                ${images.length === 0 ? `\n                    <div style=\"\n                        display: flex;\n                        flex-direction: column;\n                        align-items: center;\n                        justify-content: center;\n                        color: #9ca3af;\n                        text-align: center;\n                        grid-column: 1 / -1;\n                    \">\n                        <i class=\"fas fa-image\" style=\"font-size: 48px; margin-bottom: 8px;\"></i>\n                        <p>Empty gallery</p>\n                    </div>\n                ` : ''}\n            </div>\n        </div>\n    `;\n};\n\n/**\r\n * Render section v·ªõi children\r\n */\nconst renderSectionHTML = (section, viewMode = 'desktop') => {\n  var _section$responsiveSt;\n  if (section.visible === false) return '';\n  const {\n    id,\n    componentData = {},\n    styles = {},\n    size = {},\n    position = {},\n    children = []\n  } = getResponsiveValues(section, viewMode);\n  const responsiveStyles = ((_section$responsiveSt = section.responsiveStyles) === null || _section$responsiveSt === void 0 ? void 0 : _section$responsiveSt[viewMode]) || {};\n  const combinedStyles = {\n    ...styles,\n    ...responsiveStyles\n  };\n  const childrenHTML = children.filter(child => child.visible !== false).map(child => renderElementHTML(child, true, viewMode)).join('\\n');\n  return `\n        <section \n            id=\"${id}\"\n            data-element-id=\"${id}\"\n            class=\"lpb-section ladi-section\"\n            style=\"\n                position: absolute;\n                top: ${position.y || 0}px;\n                left: 50%;\n                transform: translateX(-50%);\n                width: ${viewMode === 'desktop' ? '1200px' : viewMode === 'tablet' ? '768px' : '375px'};\n                height: ${size.height || 400}px;\n            \"\n        >\n            <div class=\"ladi-section-background\" style=\"\n                position: absolute;\n                inset: 0;\n                z-index: 0;\n                background-color: ${componentData.backgroundColor || combinedStyles.backgroundColor || 'transparent'};\n                background-image: ${componentData.backgroundImage ? `url(${componentData.backgroundImage})` : 'none'};\n                background-size: cover;\n                background-position: center;\n            \"></div>\n            <div class=\"ladi-overlay\" style=\"\n                position: absolute;\n                inset: 0;\n                z-index: 0;\n                background-color: ${componentData.overlayColor || 'transparent'};\n                opacity: ${componentData.overlayOpacity || 0};\n            \"></div>\n            <div class=\"ladi-container\" style=\"\n                position: relative;\n                z-index: 1;\n                padding: ${componentData.padding || combinedStyles.padding || '20px'};\n                width: 100%;\n                height: 100%;\n            \">\n                ${childrenHTML}\n            </div>\n        </section>\n    `;\n};\n\n/**\r\n * Generate CSS t·ª´ pageData v·ªõi h·ªó tr·ª£ responsive\r\n */\nconst generateCSS = pageData => {\n  let css = `\n        * {\n            box-sizing: border-box;\n        }\n        \n        body {\n            margin: 0;\n            padding: 0;\n        }\n        \n        .lpb-element {\n            transition: all 0.3s ease;\n        }\n        \n        .lpb-popup {\n            position: fixed;\n            inset: 0;\n            z-index: 9999;\n            display: none;\n            align-items: center;\n            justify-content: center;\n        }\n        \n        .lpb-popup.lpb-popup-active {\n            display: flex;\n        }\n        \n        .lpb-popup-overlay {\n            position: absolute;\n            inset: 0;\n            background: rgba(0, 0, 0, 0.5);\n            cursor: pointer;\n        }\n        \n        .lpb-popup-container {\n            position: relative;\n            z-index: 1;\n            background: white;\n            border-radius: 12px;\n            max-height: 90vh;\n            overflow-y: auto;\n            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n        }\n        \n        .lpb-popup-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 16px 20px;\n            border-bottom: 1px solid #e5e7eb;\n            background: linear-gradient(to bottom, #f9fafb, #ffffff);\n        }\n        \n        .lpb-popup-close {\n            width: 28px;\n            height: 28px;\n            border: none;\n            background: transparent;\n            cursor: pointer;\n            border-radius: 6px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            transition: all 0.15s ease;\n            color: #6b7280;\n            font-size: 18px;\n            font-weight: bold;\n        }\n        \n        .lpb-popup-close:hover {\n            background: #f3f4f6;\n            color: #111827;\n        }\n        \n        .lpb-popup-body {\n            padding: 20px;\n        }\n        \n        .lpb-spinner {\n            border: 3px solid #f3f3f3;\n            border-top: 3px solid #3b82f6;\n            border-radius: 50%;\n            width: 40px;\n            height: 40px;\n            animation: spin 1s linear infinite;\n            margin: 0 auto;\n        }\n        \n        @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n        }\n    `;\n\n  // Generate CSS cho m·ªói element\n  pageData.elements.filter(el => el.visible !== false).forEach(element => {\n    const generateStylesForMode = viewMode => {\n      var _element$responsiveSt3;\n      const {\n        id,\n        styles = {},\n        size = {},\n        position = {}\n      } = getResponsiveValues(element, viewMode);\n      const responsiveStyles = ((_element$responsiveSt3 = element.responsiveStyles) === null || _element$responsiveSt3 === void 0 ? void 0 : _element$responsiveSt3[viewMode]) || {};\n      const combinedStyles = {\n        ...styles,\n        ...responsiveStyles\n      };\n      const styleString = Object.entries(combinedStyles).filter(([key]) => !key.startsWith(':') && !key.startsWith('@')).map(([key, value]) => {\n        const cssKey = key.replace(/([A-Z])/g, '-$1').toLowerCase();\n        return `${cssKey}: ${value};`;\n      }).join(' ');\n      return `\n                    #${id} {\n                        position: absolute;\n                        left: ${position.x || 0}px;\n                        top: ${position.y || 0}px;\n                        width: ${size.width || (element.type === 'section' ? 1200 : 200)}px;\n                        height: ${size.height || (element.type === 'section' ? 400 : 50)}px;\n                        z-index: ${position.z || 1};\n                        ${styleString}\n                    }\n                    ${combinedStyles[':hover'] ? `\n                        #${id}:hover {\n                            ${Object.entries(combinedStyles[':hover']).map(([key, value]) => `${key.replace(/([A-Z])/g, '-$1').toLowerCase()}: ${value};`).join(' ')}\n                        }\n                    ` : ''}\n                    ${combinedStyles['@keyframes'] ? `\n                        @keyframes ${id}-keyframes {\n                            ${Object.entries(combinedStyles['@keyframes']).map(([key, value]) => `${key} { ${Object.entries(value).map(([k, v]) => `${k.replace(/([A-Z])/g, '-$1').toLowerCase()}: ${v};`).join(' ')} }`).join(' ')}\n                        }\n                    ` : ''}\n                `;\n    };\n\n    // Desktop styles\n    css += generateStylesForMode('desktop');\n\n    // Tablet media query\n    css += `\n                @media (max-width: 768px) {\n                    ${generateStylesForMode('tablet')}\n                    .lpb-section {\n                        width: 100% !important;\n                    }\n                    .lpb-popup-container {\n                        width: 90% !important;\n                        max-width: 90vw !important;\n                    }\n                }\n            `;\n\n    // Mobile media query\n    css += `\n                @media (max-width: 375px) {\n                    ${generateStylesForMode('mobile')}\n                    .lpb-section {\n                        width: 100% !important;\n                    }\n                    .lpb-popup-container {\n                        width: 90% !important;\n                        max-width: 90vw !important;\n                    }\n                }\n            `;\n  });\n  return css;\n};\n\n/**\r\n * Render to√†n b·ªô pageData th√†nh static HTML v·ªõi embedded runtime\r\n * @param {Object} pageData - Page data\r\n * @returns {string} - Complete HTML document\r\n */\nexport const renderStaticHTML = pageData => {\n  var _initializedPageData$, _initializedPageData$2, _initializedPageData$3, _initializedPageData$4;\n  // Kh·ªüi t·∫°o responsive data\n  const initializedPageData = initializeResponsiveData(pageData);\n\n  // L·ªçc c√°c th√†nh ph·∫ßn\n  const popups = initializedPageData.elements.filter(el => el.type === 'popup' && el.visible !== false);\n  const sections = initializedPageData.elements.filter(el => el.type === 'section' && el.visible !== false);\n  const standaloneElements = initializedPageData.elements.filter(el => el.type !== 'section' && el.type !== 'popup' && el.visible !== false);\n\n  // Generate HTML parts\n  const sectionsHTML = sections.map(section => renderSectionHTML(section, 'desktop')).join('\\n');\n  const popupsHTML = renderPopupsHTML(popups, 'desktop');\n  const standaloneHTML = standaloneElements.map(element => renderElementHTML(element, false, 'desktop')).join('\\n');\n  const cssContent = generateCSS(initializedPageData);\n  const events = extractEvents(initializedPageData);\n  const runtimeScript = generateEventRuntime(events, popups);\n\n  // Embed pageData as JSON\n  const embeddedPageData = JSON.stringify(initializedPageData, null, 2);\n  return `\n        <!DOCTYPE html>\n        <html lang=\"vi\">\n        <head>\n            <meta charset=\"UTF-8\">\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n            <meta name=\"description\" content=\"${((_initializedPageData$ = initializedPageData.meta) === null || _initializedPageData$ === void 0 ? void 0 : _initializedPageData$.description) || 'Landing page generated by LandingHub'}\">\n            <title>${((_initializedPageData$2 = initializedPageData.meta) === null || _initializedPageData$2 === void 0 ? void 0 : _initializedPageData$2.title) || 'Landing Page'}</title>\n            \n            <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\" />\n            \n            <style>\n                ${cssContent}\n            </style>\n        </head>\n        <body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\">\n            <div id=\"lpb-canvas\" style=\"\n                position: relative;\n                min-height: 100vh;\n                background: ${((_initializedPageData$3 = initializedPageData.canvas) === null || _initializedPageData$3 === void 0 ? void 0 : _initializedPageData$3.background) || '#ffffff'};\n            \">\n                ${sectionsHTML}\n                ${standaloneHTML}\n            </div>\n            \n            ${popupsHTML}\n            \n            <script type=\"application/json\" id=\"lpb-page-data\">\n                ${embeddedPageData}\n            </script>\n            \n            <script>\n                ${runtimeScript}\n            </script>\n            \n            ${(_initializedPageData$4 = initializedPageData.analytics) !== null && _initializedPageData$4 !== void 0 && _initializedPageData$4.googleAnalyticsId ? `\n            <script async src=\"https://www.googletagmanager.com/gtag/js?id=${initializedPageData.analytics.googleAnalyticsId}\"></script>\n            <script>\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n                gtag('config', '${initializedPageData.analytics.googleAnalyticsId}');\n            </script>\n            ` : ''}\n        </body>\n        </html>\n    `;\n};","map":{"version":3,"names":["generateEventRuntime","events","popups","JSON","stringify","extractEvents","pageData","processElement","element","parentId","_element$componentDat","elementId","id","visible","componentData","push","type","Array","isArray","children","forEach","child","_child$componentData","elements","renderPopupsHTML","viewMode","filter","popup","map","_popup$responsiveStyl","styles","size","getResponsiveValues","responsiveStyles","combinedStyles","childrenHTML","renderElementHTML","join","width","height","background","borderRadius","title","padding","content","isChild","_element$responsiveSt","_componentData$icon","position","inlineStyles","Object","entries","key","startsWith","value","kebabKey","replace","m","toLowerCase","baseAttrs","positionStyles","x","y","renderSectionHTML","HeadingTag","level","src","imageUrl","alt","isSvg","icon","renderGalleryHTML","_element$responsiveSt2","images","display","gridTemplateColumns","gap","index","objectFit","objectPosition","length","section","_section$responsiveSt","backgroundColor","backgroundImage","overlayColor","overlayOpacity","generateCSS","css","el","generateStylesForMode","_element$responsiveSt3","styleString","cssKey","z","k","v","renderStaticHTML","_initializedPageData$","_initializedPageData$2","_initializedPageData$3","_initializedPageData$4","initializedPageData","initializeResponsiveData","sections","standaloneElements","sectionsHTML","popupsHTML","standaloneHTML","cssContent","runtimeScript","embeddedPageData","meta","description","canvas","analytics","googleAnalyticsId"],"sources":["F:/landinghub-iconic/apps/web/src/utils/pageUtils.js"],"sourcesContent":["// ==================== EVENT RUNTIME GENERATOR ====================\r\n\r\n/**\r\n * Generate runtime script ƒë·ªÉ x·ª≠ l√Ω events trong HTML tƒ©nh\r\n * @param {Array} events - Danh s√°ch events t·ª´ pageData\r\n * @param {Array} popups - Danh s√°ch popup elements\r\n * @returns {string} - JavaScript code\r\n */\r\nconst generateEventRuntime = (events, popups) => {\r\n    return `\r\n    // Landing Page Builder Runtime v1.1\r\n    (function() {\r\n        'use strict';\r\n        \r\n        window.LPB = window.LPB || {};\r\n        \r\n        // ========== POPUP MANAGER ==========\r\n        LPB.popups = {\r\n            active: new Set(),\r\n            \r\n            open: function(popupId, data) {\r\n                const popup = document.getElementById(popupId);\r\n                if (!popup) {\r\n                    console.error('[LPB] Popup not found:', popupId);\r\n                    return;\r\n                }\r\n                \r\n                if (data && data.html) {\r\n                    const content = popup.querySelector('.lpb-popup-body');\r\n                    if (content) content.innerHTML = data.html;\r\n                }\r\n                \r\n                popup.classList.add('lpb-popup-active');\r\n                document.body.style.overflow = 'hidden';\r\n                this.active.add(popupId);\r\n                \r\n                if (window.gtag) {\r\n                    gtag('event', 'popup_open', {\r\n                        event_category: 'Engagement',\r\n                        event_label: popupId\r\n                    });\r\n                }\r\n            },\r\n            \r\n            close: function(popupId) {\r\n                const popup = document.getElementById(popupId);\r\n                if (popup) {\r\n                    popup.classList.remove('lpb-popup-active');\r\n                    this.active.delete(popupId);\r\n                    if (this.active.size === 0) {\r\n                        document.body.style.overflow = '';\r\n                    }\r\n                }\r\n            },\r\n            \r\n            closeAll: function() {\r\n                this.active.forEach(id => this.close(id));\r\n            }\r\n        };\r\n        \r\n        // ========== API MANAGER ==========\r\n        LPB.api = {\r\n            cache: new Map(),\r\n            \r\n            getCacheKey: function(endpoint, params) {\r\n                return endpoint + JSON.stringify(params || {});\r\n            },\r\n            \r\n            fetch: async function(endpoint, options = {}) {\r\n                const cacheKey = this.getCacheKey(endpoint, options.params);\r\n                \r\n                if (this.cache.has(cacheKey)) {\r\n                    const cached = this.cache.get(cacheKey);\r\n                    const now = Date.now();\r\n                    const TTL = options.ttl || 5 * 60 * 1000;\r\n                    if (now - cached.timestamp < TTL) {\r\n                        console.log('[LPB] Cache hit:', endpoint);\r\n                        return cached.data;\r\n                    }\r\n                }\r\n                \r\n                try {\r\n                    console.log('[LPB] Fetching:', endpoint);\r\n                    const response = await fetch(endpoint, {\r\n                        method: options.method || 'GET',\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            ...options.headers\r\n                        },\r\n                        body: options.data ? JSON.stringify(options.data) : undefined\r\n                    });\r\n                    \r\n                    if (!response.ok) {\r\n                        throw new Error(\\`HTTP \\${response.status}: \\${response.statusText}\\`);\r\n                    }\r\n                    \r\n                    const data = await response.json();\r\n                    this.cache.set(cacheKey, {\r\n                        data: data,\r\n                        timestamp: Date.now()\r\n                    });\r\n                    return data;\r\n                } catch (error) {\r\n                    console.error('[LPB] API Error:', error);\r\n                    throw error;\r\n                }\r\n            },\r\n            \r\n            clearCache: function(endpoint) {\r\n                if (endpoint) {\r\n                    for (let key of this.cache.keys()) {\r\n                        if (key.startsWith(endpoint)) {\r\n                            this.cache.delete(key);\r\n                        }\r\n                    }\r\n                } else {\r\n                    this.cache.clear();\r\n                }\r\n            }\r\n        };\r\n        \r\n        // ========== EVENT HANDLER ==========\r\n        LPB.handleEvent = async function(config) {\r\n            const { type } = config;\r\n            \r\n            try {\r\n                switch(type) {\r\n                    case 'openPopup':\r\n                        if (!config.popupId) {\r\n                            console.error('[LPB] Missing popupId');\r\n                            return;\r\n                        }\r\n                        this.popups.open(config.popupId, config.data);\r\n                        break;\r\n                        \r\n                    case 'closePopup':\r\n                        const targetPopupId = config.popupId || config.elementId;\r\n                        if (!targetPopupId) {\r\n                            console.error('[LPB] Missing popupId');\r\n                            return;\r\n                        }\r\n                        this.popups.close(targetPopupId);\r\n                        break;\r\n                        \r\n                    case 'triggerApi':\r\n                        if (!config.apiUrl) {\r\n                            console.error('[LPB] Missing apiUrl');\r\n                            return;\r\n                        }\r\n                        const data = await this.api.fetch(config.apiUrl, {\r\n                            method: config.method || 'GET',\r\n                            params: config.params,\r\n                            data: config.data\r\n                        });\r\n                        if (config.updateTarget) {\r\n                            const target = document.getElementById(config.updateTarget);\r\n                            if (target && data.html) {\r\n                                target.innerHTML = data.html;\r\n                            }\r\n                        }\r\n                        break;\r\n                        \r\n                    case 'both':\r\n                        this.popups.open(config.popupId, { \r\n                            html: '<div style=\"text-align:center;padding:40px;\"><div class=\"lpb-spinner\"></div><p>ƒêang t·∫£i...</p></div>' \r\n                        });\r\n                        const apiData = await this.api.fetch(config.apiUrl, {\r\n                            method: config.method || 'GET',\r\n                            params: config.params\r\n                        });\r\n                        this.popups.open(config.popupId, { html: apiData.html || JSON.stringify(apiData) });\r\n                        break;\r\n                        \r\n                    case 'navigate':\r\n                        if (!config.url) {\r\n                            console.error('[LPB] Missing url');\r\n                            return;\r\n                        }\r\n                        if (config.newTab) {\r\n                            window.open(config.url, '_blank');\r\n                        } else {\r\n                            window.location.href = config.url;\r\n                        }\r\n                        break;\r\n                        \r\n                    case 'scrollToSection':\r\n                        if (!config.sectionId) {\r\n                            console.error('[LPB] Missing sectionId');\r\n                            return;\r\n                        }\r\n                        const section = document.querySelector(\\`[data-element-id=\"\\${config.sectionId}\"]\\`);\r\n                        if (section) {\r\n                            section.scrollIntoView({ \r\n                                behavior: config.smooth !== false ? 'smooth' : 'auto',\r\n                                block: 'start'\r\n                            });\r\n                        } else {\r\n                            console.error('[LPB] Section not found:', config.sectionId);\r\n                        }\r\n                        break;\r\n                        \r\n                    case 'submitForm':\r\n                        if (!config.apiUrl) {\r\n                            console.error('[LPB] Missing apiUrl');\r\n                            return;\r\n                        }\r\n                        console.log('[LPB] Form submit to:', config.apiUrl);\r\n                        break;\r\n                        \r\n                    default:\r\n                        console.warn('[LPB] Unknown event type:', type);\r\n                }\r\n            } catch (error) {\r\n                console.error('[LPB] Event handling error:', error);\r\n                alert('C√≥ l·ªói x·∫£y ra: ' + error.message);\r\n            }\r\n        };\r\n        \r\n        // ========== AUTO-BIND EVENTS ==========\r\n        const eventsConfig = ${JSON.stringify(events)};\r\n        \r\n        function bindEvents() {\r\n            console.log('[LPB] Initializing events...', eventsConfig.length);\r\n            \r\n            eventsConfig.forEach(config => {\r\n                const element = document.getElementById(config.elementId);\r\n                if (!element) {\r\n                    return; // Silently skip missing elements\r\n                }\r\n                \r\n                if (config.events.onClick && config.events.onClick.type !== 'none') {\r\n                    element.addEventListener('click', function(e) {\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                        LPB.handleEvent(config.events.onClick);\r\n                    });\r\n                    element.style.cursor = 'pointer';\r\n                }\r\n                \r\n                if (config.events.onClick?.params?.apiConfig?.preload) {\r\n                    element.addEventListener('mouseenter', function() {\r\n                        LPB.api.fetch(\r\n                            config.events.onClick.params.apiConfig.endpoint,\r\n                            config.events.onClick.params.apiConfig\r\n                        ).catch(() => {});\r\n                    }, { once: true });\r\n                }\r\n                \r\n                if (config.events.onHover) {\r\n                    const hoverClass = config.events.onHover.className;\r\n                    if (hoverClass) {\r\n                        element.addEventListener('mouseenter', function() {\r\n                            this.classList.add(hoverClass);\r\n                        });\r\n                        element.addEventListener('mouseleave', function() {\r\n                            this.classList.remove(hoverClass);\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n            \r\n            console.log('[LPB] Events initialized!');\r\n        }\r\n        \r\n        // Bind events immediately and fallback to DOMContentLoaded\r\n        bindEvents();\r\n        if (document.readyState === 'loading') {\r\n            document.addEventListener('DOMContentLoaded', bindEvents);\r\n        }\r\n        \r\n        // ========== ESC TO CLOSE POPUP ==========\r\n        document.addEventListener('keydown', function(e) {\r\n            if (e.key === 'Escape') {\r\n                LPB.popups.closeAll();\r\n            }\r\n        });\r\n        \r\n        console.log('[LPB] Runtime loaded');\r\n    })();\r\n    `;\r\n};\r\n\r\n/**\r\n * Extract t·∫•t c·∫£ events t·ª´ pageData elements\r\n * @param {Object} pageData - Page data object\r\n * @returns {Array} - Array of event configs\r\n */\r\nconst extractEvents = (pageData) => {\r\n    const events = [];\r\n\r\n    const processElement = (element, parentId = null) => {\r\n        const elementId = element.id;\r\n\r\n        // Ch·ªâ x·ª≠ l√Ω ph·∫ßn t·ª≠ hi·ªÉn th·ªã\r\n        if (element.visible === false) return;\r\n\r\n        if (element.componentData?.events) {\r\n            events.push({\r\n                elementId: elementId,\r\n                events: element.componentData.events,\r\n                type: element.type,\r\n                parentId: parentId\r\n            });\r\n        }\r\n\r\n        if (Array.isArray(element.children)) {\r\n            element.children.forEach(child => {\r\n                if (child.visible !== false && child.componentData?.events) {\r\n                    events.push({\r\n                        elementId: child.id,\r\n                        events: child.componentData.events,\r\n                        type: child.type,\r\n                        parentId: elementId\r\n                    });\r\n                }\r\n                if (Array.isArray(child.children)) {\r\n                    processElement(child, child.id);\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    pageData.elements.forEach(element => {\r\n        processElement(element);\r\n    });\r\n\r\n    return events;\r\n};\r\n\r\n/**\r\n * Render t·∫•t c·∫£ popups th√†nh HTML\r\n * @param {Array} popups - Array of popup elements\r\n * @param {string} viewMode - Current view mode (desktop, tablet, mobile)\r\n * @returns {string} - HTML string\r\n */\r\nconst renderPopupsHTML = (popups, viewMode = 'desktop') => {\r\n    return popups\r\n        .filter(popup => popup.visible !== false)\r\n        .map(popup => {\r\n            const { id, componentData = {}, styles = {}, size = {}, children = [] } = getResponsiveValues(popup, viewMode);\r\n            const responsiveStyles = popup.responsiveStyles?.[viewMode] || {};\r\n            const combinedStyles = { ...styles, ...responsiveStyles };\r\n\r\n            const childrenHTML = children\r\n                .filter(child => child.visible !== false)\r\n                .map(child => renderElementHTML(child, true, viewMode))\r\n                .join('');\r\n\r\n            return `\r\n                <div \r\n                    id=\"${id}\" \r\n                    class=\"lpb-popup\" \r\n                    data-element-id=\"${id}\"\r\n                    style=\"display:none;\"\r\n                >\r\n                    <div \r\n                        class=\"lpb-popup-overlay\" \r\n                        onclick=\"LPB.popups.close('${id}')\"\r\n                    ></div>\r\n                    <div \r\n                        class=\"lpb-popup-container\"\r\n                        style=\"\r\n                            width: ${size.width || 600}px;\r\n                            max-width: 90vw;\r\n                            min-height: ${size.height || 400}px;\r\n                            background: ${combinedStyles.background || componentData.background || 'rgba(255, 255, 255, 0.95)'};\r\n                            border-radius: ${combinedStyles.borderRadius || componentData.borderRadius || '12px'};\r\n                            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);\r\n                        \"\r\n                    >\r\n                        <div class=\"lpb-popup-header\">\r\n                            <h3 style=\"margin:0; font-size:16px; font-weight:600; color:#111827;\">\r\n                                ${componentData.title || 'Popup Title'}\r\n                            </h3>\r\n                            <button \r\n                                class=\"lpb-popup-close\" \r\n                                onclick=\"LPB.popups.close('${id}')\"\r\n                                aria-label=\"Close popup\"\r\n                            >\r\n                                ‚úï\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"lpb-popup-body\" style=\"padding: ${componentData.padding || '20px'};\">\r\n                            ${childrenHTML || `<p style=\"color:#6b7280;\">${componentData.content || 'Popup content'}</p>`}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            `;\r\n        }).join('\\n');\r\n};\r\n\r\n/**\r\n * Render m·ªôt element th√†nh HTML v·ªõi proper ID v√† responsive support\r\n * @param {Object} element - Element object\r\n * @param {boolean} isChild - Whether this is a child element\r\n * @param {string} viewMode - Current view mode (desktop, tablet, mobile)\r\n * @returns {string} - HTML string\r\n */\r\nconst renderElementHTML = (element, isChild = false, viewMode = 'desktop') => {\r\n    if (element.visible === false) return '';\r\n\r\n    const { id, type, componentData = {}, styles = {}, size = {}, position = {} } = getResponsiveValues(element, viewMode);\r\n    const responsiveStyles = element.responsiveStyles?.[viewMode] || {};\r\n    const combinedStyles = { ...styles, ...responsiveStyles };\r\n\r\n    const inlineStyles = Object.entries(combinedStyles)\r\n        .filter(([key]) => !key.startsWith(':') && !key.startsWith('@'))\r\n        .map(([key, value]) => {\r\n            const kebabKey = key.replace(/[A-Z]/g, m => `-${m.toLowerCase()}`);\r\n            return `${kebabKey}:${value}`;\r\n        })\r\n        .join(';');\r\n\r\n    const baseAttrs = `\r\n        id=\"${id}\"\r\n        data-element-id=\"${id}\"\r\n        data-type=\"${type}\"\r\n        class=\"lpb-element lpb-${type}\"\r\n    `;\r\n\r\n    const positionStyles = isChild ? `\r\n        position: absolute;\r\n        left: ${position.x || 0}px;\r\n        top: ${position.y || 0}px;\r\n        width: ${size.width || 200}px;\r\n        height: ${size.height || 50}px;\r\n    ` : '';\r\n\r\n    switch(type) {\r\n        case 'section':\r\n            return renderSectionHTML(element, viewMode);\r\n\r\n        case 'button':\r\n            return `\r\n                <button \r\n                    ${baseAttrs}\r\n                    style=\"${inlineStyles}; ${positionStyles}\"\r\n                >\r\n                    ${componentData.content || 'Button'}\r\n                </button>\r\n            `;\r\n\r\n        case 'heading':\r\n            const HeadingTag = componentData.level || 'h2';\r\n            return `\r\n                <${HeadingTag} \r\n                    ${baseAttrs}\r\n                    style=\"${inlineStyles}; ${positionStyles}\"\r\n                >\r\n                    ${componentData.content || 'Heading'}\r\n                </${HeadingTag}>\r\n            `;\r\n\r\n        case 'paragraph':\r\n            return `\r\n                <p \r\n                    ${baseAttrs}\r\n                    style=\"${inlineStyles}; ${positionStyles}\"\r\n                >\r\n                    ${componentData.content || 'Paragraph'}\r\n                </p>\r\n            `;\r\n\r\n        case 'image':\r\n            return `\r\n                <img \r\n                    ${baseAttrs}\r\n                    src=\"${componentData.src || componentData.imageUrl || 'https://via.placeholder.com/150'}\"\r\n                    alt=\"${componentData.alt || 'Image'}\"\r\n                    style=\"${inlineStyles}; ${positionStyles}\"\r\n                />\r\n            `;\r\n\r\n        case 'icon':\r\n            const isSvg = componentData.icon?.startsWith('<svg');\r\n            return `\r\n                <div \r\n                    ${baseAttrs}\r\n                    style=\"${inlineStyles}; ${positionStyles}\"\r\n                    title=\"${componentData.title || ''}\"\r\n                >\r\n                    ${componentData.imageUrl\r\n                ? `<img src=\"${componentData.imageUrl}\" alt=\"${componentData.title || 'Icon'}\" style=\"width:100%;height:100%;object-fit:contain;\" />`\r\n                : isSvg\r\n                    ? componentData.icon\r\n                    : componentData.icon\r\n                        ? `<i class=\"${componentData.icon}\"></i>`\r\n                        : 'üì¶'\r\n            }\r\n                </div>\r\n            `;\r\n\r\n        case 'gallery':\r\n            return renderGalleryHTML(element, isChild, viewMode);\r\n\r\n        default:\r\n            return `\r\n                <div \r\n                    ${baseAttrs}\r\n                    style=\"${inlineStyles}; ${positionStyles}\"\r\n                >\r\n                    ${componentData.content || type}\r\n                </div>\r\n            `;\r\n    }\r\n};\r\n\r\n/**\r\n * Render gallery element\r\n */\r\nconst renderGalleryHTML = (element, isChild, viewMode = 'desktop') => {\r\n    if (element.visible === false) return '';\r\n\r\n    const { id, componentData = {}, styles = {}, size = {}, position = {} } = getResponsiveValues(element, viewMode);\r\n    const responsiveStyles = element.responsiveStyles?.[viewMode] || {};\r\n    const combinedStyles = { ...styles, ...responsiveStyles };\r\n\r\n    const positionStyles = isChild ? `\r\n        position: absolute;\r\n        left: ${position.x || 0}px;\r\n        top: ${position.y || 0}px;\r\n    ` : '';\r\n\r\n    const images = componentData.images || [];\r\n\r\n    return `\r\n        <div \r\n            id=\"${id}\"\r\n            data-element-id=\"${id}\"\r\n            data-type=\"gallery\"\r\n            class=\"lpb-element lpb-gallery\"\r\n            style=\"${positionStyles} width: ${size.width || 380}px; height: ${size.height || 300}px;\"\r\n        >\r\n            <div style=\"\r\n                display: ${combinedStyles.display || 'grid'};\r\n                grid-template-columns: ${combinedStyles.gridTemplateColumns || 'repeat(auto-fill, minmax(150px, 1fr))'};\r\n                gap: ${combinedStyles.gap || '10px'};\r\n                width: 100%;\r\n                height: 100%;\r\n            \">\r\n                ${images.map((imageUrl, index) => `\r\n                    <div style=\"\r\n                        position: relative;\r\n                        overflow: hidden;\r\n                        border-radius: ${combinedStyles.borderRadius || '8px'};\r\n                        aspect-ratio: 1 / 1;\r\n                    \">\r\n                        <img\r\n                            src=\"${imageUrl || 'https://via.placeholder.com/150'}\"\r\n                            alt=\"Gallery ${index + 1}\"\r\n                            style=\"\r\n                                width: 100%;\r\n                                height: 100%;\r\n                                object-fit: ${combinedStyles.objectFit || 'cover'};\r\n                                object-position: ${combinedStyles.objectPosition || 'center'};\r\n                            \"\r\n                            loading=\"lazy\"\r\n                        />\r\n                    </div>\r\n                `).join('')}\r\n                ${images.length === 0 ? `\r\n                    <div style=\"\r\n                        display: flex;\r\n                        flex-direction: column;\r\n                        align-items: center;\r\n                        justify-content: center;\r\n                        color: #9ca3af;\r\n                        text-align: center;\r\n                        grid-column: 1 / -1;\r\n                    \">\r\n                        <i class=\"fas fa-image\" style=\"font-size: 48px; margin-bottom: 8px;\"></i>\r\n                        <p>Empty gallery</p>\r\n                    </div>\r\n                ` : ''}\r\n            </div>\r\n        </div>\r\n    `;\r\n};\r\n\r\n/**\r\n * Render section v·ªõi children\r\n */\r\nconst renderSectionHTML = (section, viewMode = 'desktop') => {\r\n    if (section.visible === false) return '';\r\n\r\n    const { id, componentData = {}, styles = {}, size = {}, position = {}, children = [] } = getResponsiveValues(section, viewMode);\r\n    const responsiveStyles = section.responsiveStyles?.[viewMode] || {};\r\n    const combinedStyles = { ...styles, ...responsiveStyles };\r\n\r\n    const childrenHTML = children\r\n        .filter(child => child.visible !== false)\r\n        .map(child => renderElementHTML(child, true, viewMode))\r\n        .join('\\n');\r\n\r\n    return `\r\n        <section \r\n            id=\"${id}\"\r\n            data-element-id=\"${id}\"\r\n            class=\"lpb-section ladi-section\"\r\n            style=\"\r\n                position: absolute;\r\n                top: ${position.y || 0}px;\r\n                left: 50%;\r\n                transform: translateX(-50%);\r\n                width: ${viewMode === 'desktop' ? '1200px' : viewMode === 'tablet' ? '768px' : '375px'};\r\n                height: ${size.height || 400}px;\r\n            \"\r\n        >\r\n            <div class=\"ladi-section-background\" style=\"\r\n                position: absolute;\r\n                inset: 0;\r\n                z-index: 0;\r\n                background-color: ${componentData.backgroundColor || combinedStyles.backgroundColor || 'transparent'};\r\n                background-image: ${componentData.backgroundImage ? `url(${componentData.backgroundImage})` : 'none'};\r\n                background-size: cover;\r\n                background-position: center;\r\n            \"></div>\r\n            <div class=\"ladi-overlay\" style=\"\r\n                position: absolute;\r\n                inset: 0;\r\n                z-index: 0;\r\n                background-color: ${componentData.overlayColor || 'transparent'};\r\n                opacity: ${componentData.overlayOpacity || 0};\r\n            \"></div>\r\n            <div class=\"ladi-container\" style=\"\r\n                position: relative;\r\n                z-index: 1;\r\n                padding: ${componentData.padding || combinedStyles.padding || '20px'};\r\n                width: 100%;\r\n                height: 100%;\r\n            \">\r\n                ${childrenHTML}\r\n            </div>\r\n        </section>\r\n    `;\r\n};\r\n\r\n/**\r\n * Generate CSS t·ª´ pageData v·ªõi h·ªó tr·ª£ responsive\r\n */\r\nconst generateCSS = (pageData) => {\r\n    let css = `\r\n        * {\r\n            box-sizing: border-box;\r\n        }\r\n        \r\n        body {\r\n            margin: 0;\r\n            padding: 0;\r\n        }\r\n        \r\n        .lpb-element {\r\n            transition: all 0.3s ease;\r\n        }\r\n        \r\n        .lpb-popup {\r\n            position: fixed;\r\n            inset: 0;\r\n            z-index: 9999;\r\n            display: none;\r\n            align-items: center;\r\n            justify-content: center;\r\n        }\r\n        \r\n        .lpb-popup.lpb-popup-active {\r\n            display: flex;\r\n        }\r\n        \r\n        .lpb-popup-overlay {\r\n            position: absolute;\r\n            inset: 0;\r\n            background: rgba(0, 0, 0, 0.5);\r\n            cursor: pointer;\r\n        }\r\n        \r\n        .lpb-popup-container {\r\n            position: relative;\r\n            z-index: 1;\r\n            background: white;\r\n            border-radius: 12px;\r\n            max-height: 90vh;\r\n            overflow-y: auto;\r\n            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\r\n        }\r\n        \r\n        .lpb-popup-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            padding: 16px 20px;\r\n            border-bottom: 1px solid #e5e7eb;\r\n            background: linear-gradient(to bottom, #f9fafb, #ffffff);\r\n        }\r\n        \r\n        .lpb-popup-close {\r\n            width: 28px;\r\n            height: 28px;\r\n            border: none;\r\n            background: transparent;\r\n            cursor: pointer;\r\n            border-radius: 6px;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            transition: all 0.15s ease;\r\n            color: #6b7280;\r\n            font-size: 18px;\r\n            font-weight: bold;\r\n        }\r\n        \r\n        .lpb-popup-close:hover {\r\n            background: #f3f4f6;\r\n            color: #111827;\r\n        }\r\n        \r\n        .lpb-popup-body {\r\n            padding: 20px;\r\n        }\r\n        \r\n        .lpb-spinner {\r\n            border: 3px solid #f3f3f3;\r\n            border-top: 3px solid #3b82f6;\r\n            border-radius: 50%;\r\n            width: 40px;\r\n            height: 40px;\r\n            animation: spin 1s linear infinite;\r\n            margin: 0 auto;\r\n        }\r\n        \r\n        @keyframes spin {\r\n            0% { transform: rotate(0deg); }\r\n            100% { transform: rotate(360deg); }\r\n        }\r\n    `;\r\n\r\n    // Generate CSS cho m·ªói element\r\n    pageData.elements\r\n        .filter(el => el.visible !== false)\r\n        .forEach(element => {\r\n            const generateStylesForMode = (viewMode) => {\r\n                const { id, styles = {}, size = {}, position = {} } = getResponsiveValues(element, viewMode);\r\n                const responsiveStyles = element.responsiveStyles?.[viewMode] || {};\r\n                const combinedStyles = { ...styles, ...responsiveStyles };\r\n\r\n                const styleString = Object.entries(combinedStyles)\r\n                    .filter(([key]) => !key.startsWith(':') && !key.startsWith('@'))\r\n                    .map(([key, value]) => {\r\n                        const cssKey = key.replace(/([A-Z])/g, '-$1').toLowerCase();\r\n                        return `${cssKey}: ${value};`;\r\n                    })\r\n                    .join(' ');\r\n\r\n                return `\r\n                    #${id} {\r\n                        position: absolute;\r\n                        left: ${position.x || 0}px;\r\n                        top: ${position.y || 0}px;\r\n                        width: ${size.width || (element.type === 'section' ? 1200 : 200)}px;\r\n                        height: ${size.height || (element.type === 'section' ? 400 : 50)}px;\r\n                        z-index: ${position.z || 1};\r\n                        ${styleString}\r\n                    }\r\n                    ${combinedStyles[':hover'] ? `\r\n                        #${id}:hover {\r\n                            ${Object.entries(combinedStyles[':hover'])\r\n                    .map(([key, value]) => `${key.replace(/([A-Z])/g, '-$1').toLowerCase()}: ${value};`)\r\n                    .join(' ')}\r\n                        }\r\n                    ` : ''}\r\n                    ${combinedStyles['@keyframes'] ? `\r\n                        @keyframes ${id}-keyframes {\r\n                            ${Object.entries(combinedStyles['@keyframes'])\r\n                    .map(([key, value]) => `${key} { ${Object.entries(value)\r\n                        .map(([k, v]) => `${k.replace(/([A-Z])/g, '-$1').toLowerCase()}: ${v};`)\r\n                        .join(' ')} }`)\r\n                    .join(' ')}\r\n                        }\r\n                    ` : ''}\r\n                `;\r\n            };\r\n\r\n            // Desktop styles\r\n            css += generateStylesForMode('desktop');\r\n\r\n            // Tablet media query\r\n            css += `\r\n                @media (max-width: 768px) {\r\n                    ${generateStylesForMode('tablet')}\r\n                    .lpb-section {\r\n                        width: 100% !important;\r\n                    }\r\n                    .lpb-popup-container {\r\n                        width: 90% !important;\r\n                        max-width: 90vw !important;\r\n                    }\r\n                }\r\n            `;\r\n\r\n            // Mobile media query\r\n            css += `\r\n                @media (max-width: 375px) {\r\n                    ${generateStylesForMode('mobile')}\r\n                    .lpb-section {\r\n                        width: 100% !important;\r\n                    }\r\n                    .lpb-popup-container {\r\n                        width: 90% !important;\r\n                        max-width: 90vw !important;\r\n                    }\r\n                }\r\n            `;\r\n        });\r\n\r\n    return css;\r\n};\r\n\r\n/**\r\n * Render to√†n b·ªô pageData th√†nh static HTML v·ªõi embedded runtime\r\n * @param {Object} pageData - Page data\r\n * @returns {string} - Complete HTML document\r\n */\r\nexport const renderStaticHTML = (pageData) => {\r\n    // Kh·ªüi t·∫°o responsive data\r\n    const initializedPageData = initializeResponsiveData(pageData);\r\n\r\n    // L·ªçc c√°c th√†nh ph·∫ßn\r\n    const popups = initializedPageData.elements.filter(el => el.type === 'popup' && el.visible !== false);\r\n    const sections = initializedPageData.elements.filter(el => el.type === 'section' && el.visible !== false);\r\n    const standaloneElements = initializedPageData.elements.filter(\r\n        el => el.type !== 'section' && el.type !== 'popup' && el.visible !== false\r\n    );\r\n\r\n    // Generate HTML parts\r\n    const sectionsHTML = sections.map(section => renderSectionHTML(section, 'desktop')).join('\\n');\r\n    const popupsHTML = renderPopupsHTML(popups, 'desktop');\r\n    const standaloneHTML = standaloneElements\r\n        .map(element => renderElementHTML(element, false, 'desktop'))\r\n        .join('\\n');\r\n    const cssContent = generateCSS(initializedPageData);\r\n    const events = extractEvents(initializedPageData);\r\n    const runtimeScript = generateEventRuntime(events, popups);\r\n\r\n    // Embed pageData as JSON\r\n    const embeddedPageData = JSON.stringify(initializedPageData, null, 2);\r\n\r\n    return `\r\n        <!DOCTYPE html>\r\n        <html lang=\"vi\">\r\n        <head>\r\n            <meta charset=\"UTF-8\">\r\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n            <meta name=\"description\" content=\"${initializedPageData.meta?.description || 'Landing page generated by LandingHub'}\">\r\n            <title>${initializedPageData.meta?.title || 'Landing Page'}</title>\r\n            \r\n            <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\" />\r\n            \r\n            <style>\r\n                ${cssContent}\r\n            </style>\r\n        </head>\r\n        <body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\">\r\n            <div id=\"lpb-canvas\" style=\"\r\n                position: relative;\r\n                min-height: 100vh;\r\n                background: ${initializedPageData.canvas?.background || '#ffffff'};\r\n            \">\r\n                ${sectionsHTML}\r\n                ${standaloneHTML}\r\n            </div>\r\n            \r\n            ${popupsHTML}\r\n            \r\n            <script type=\"application/json\" id=\"lpb-page-data\">\r\n                ${embeddedPageData}\r\n            </script>\r\n            \r\n            <script>\r\n                ${runtimeScript}\r\n            </script>\r\n            \r\n            ${initializedPageData.analytics?.googleAnalyticsId ? `\r\n            <script async src=\"https://www.googletagmanager.com/gtag/js?id=${initializedPageData.analytics.googleAnalyticsId}\"></script>\r\n            <script>\r\n                window.dataLayer = window.dataLayer || [];\r\n                function gtag(){dataLayer.push(arguments);}\r\n                gtag('js', new Date());\r\n                gtag('config', '${initializedPageData.analytics.googleAnalyticsId}');\r\n            </script>\r\n            ` : ''}\r\n        </body>\r\n        </html>\r\n    `;\r\n};"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,oBAAoB,GAAGA,CAACC,MAAM,EAAEC,MAAM,KAAK;EAC7C,OAAO;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+BC,IAAI,CAACC,SAAS,CAACH,MAAM,CAAC;AACrD;AACA;A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;AACA;AACA,oCAAoCtE,aAAa,CAACuE,YAAY,IAAI,aAAa;AAC/E,2BAA2BvE,aAAa,CAACwE,cAAc,IAAI,CAAC;AAC5D;AACA;AACA;AACA;AACA,2BAA2BxE,aAAa,CAAC6B,OAAO,IAAIT,cAAc,CAACS,OAAO,IAAI,MAAM;AACpF;AACA;AACA;AACA,kBAAkBR,YAAY;AAC9B;AACA;AACA,KAAK;AACL,CAAC;;AAED;AACA;AACA;AACA,MAAMoD,WAAW,GAAIjF,QAAQ,IAAK;EAC9B,IAAIkF,GAAG,GAAG;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;EAED;EACAlF,QAAQ,CAACiB,QAAQ,CACZG,MAAM,CAAC+D,EAAE,IAAIA,EAAE,CAAC5E,OAAO,KAAK,KAAK,CAAC,CAClCO,OAAO,CAACZ,OAAO,IAAI;IAChB,MAAMkF,qBAAqB,GAAIjE,QAAQ,IAAK;MAAA,IAAAkE,sBAAA;MACxC,MAAM;QAAE/E,EAAE;QAAEkB,MAAM,GAAG,CAAC,CAAC;QAAEC,IAAI,GAAG,CAAC,CAAC;QAAEiB,QAAQ,GAAG,CAAC;MAAE,CAAC,GAAGhB,mBAAmB,CAACxB,OAAO,EAAEiB,QAAQ,CAAC;MAC5F,MAAMQ,gBAAgB,GAAG,EAAA0D,sBAAA,GAAAnF,OAAO,CAACyB,gBAAgB,cAAA0D,sBAAA,uBAAxBA,sBAAA,CAA2BlE,Q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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}