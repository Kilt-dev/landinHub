{"ast":null,"code":"/**\r\n * Tính scale factor giữa các view modes\r\n */\nexport const getScaleFactor = (fromMode, toMode) => {\n  const widths = {\n    desktop: 1200,\n    tablet: 768,\n    mobile: 375\n  };\n  return widths[toMode] / widths[fromMode];\n};\n\n/**\r\n * Tự động scale size cho element\r\n */\nexport const autoScaleSize = (element, fromMode, toMode) => {\n  var _element$size4, _element$size5;\n  const scaleFactor = getScaleFactor(fromMode, toMode);\n\n  // Section luôn full-width\n  if (element.type === 'section') {\n    var _element$size;\n    return {\n      width: toMode === 'mobile' ? 375 : toMode === 'tablet' ? 768 : 1200,\n      height: ((_element$size = element.size) === null || _element$size === void 0 ? void 0 : _element$size.height) || 400\n    };\n  }\n\n  // Popup có width cố định\n  if (element.type === 'popup' || element.type === 'modal') {\n    var _element$size2, _element$size3;\n    return {\n      width: toMode === 'mobile' ? 340 : toMode === 'tablet' ? 600 : ((_element$size2 = element.size) === null || _element$size2 === void 0 ? void 0 : _element$size2.width) || 600,\n      height: ((_element$size3 = element.size) === null || _element$size3 === void 0 ? void 0 : _element$size3.height) || 400\n    };\n  }\n\n  // Scale các element khác\n  const baseWidth = ((_element$size4 = element.size) === null || _element$size4 === void 0 ? void 0 : _element$size4.width) || 200;\n  const baseHeight = ((_element$size5 = element.size) === null || _element$size5 === void 0 ? void 0 : _element$size5.height) || 50;\n  let scaledWidth = Math.round(baseWidth * scaleFactor);\n  let scaledHeight = Math.round(baseHeight * scaleFactor);\n\n  // Minimum sizes theo type\n  const minSizes = {\n    button: {\n      width: 80,\n      height: 32\n    },\n    icon: {\n      width: 24,\n      height: 24\n    },\n    image: {\n      width: 100,\n      height: 100\n    },\n    heading: {\n      width: 150,\n      height: 24\n    },\n    paragraph: {\n      width: 200,\n      height: 40\n    },\n    gallery: {\n      width: 300,\n      height: 200\n    },\n    default: {\n      width: 100,\n      height: 40\n    }\n  };\n  const minSize = minSizes[element.type] || minSizes.default;\n\n  // Maximum width cho mobile\n  if (toMode === 'mobile') {\n    scaledWidth = Math.min(scaledWidth, 340); // Để có padding 2 bên\n  }\n  return {\n    width: Math.max(scaledWidth, minSize.width),\n    height: Math.max(scaledHeight, minSize.height)\n  };\n};\n\n/**\r\n * Tự động scale position cho element\r\n */\nexport const autoScalePosition = (element, fromMode, toMode, newSize, index = 0) => {\n  var _element$position, _element$size8;\n  const fromPos = ((_element$position = element.position) === null || _element$position === void 0 ? void 0 : _element$position[fromMode]) || {\n    x: 0,\n    y: 0,\n    z: 1\n  };\n  const scaleFactor = getScaleFactor(fromMode, toMode);\n\n  // Section luôn x = 0\n  if (element.type === 'section') {\n    return {\n      x: 0,\n      y: fromPos.y,\n      z: fromPos.z || 1\n    };\n  }\n\n  // Popup center\n  if (element.type === 'popup' || element.type === 'modal') {\n    var _element$size6;\n    const canvasWidth = toMode === 'mobile' ? 375 : toMode === 'tablet' ? 768 : 1200;\n    const elementWidth = (newSize === null || newSize === void 0 ? void 0 : newSize.width) || ((_element$size6 = element.size) === null || _element$size6 === void 0 ? void 0 : _element$size6.width) || 600;\n    return {\n      x: (canvasWidth - elementWidth) / 2,\n      // Center popup\n      y: fromPos.y,\n      z: fromPos.z || 1001\n    };\n  }\n\n  // Các element khác trong mobile\n  if (toMode === 'mobile') {\n    var _element$size7;\n    // Đặt left cố định là 10px\n    const left = 10;\n    // Sắp xếp dọc, mỗi element cách nhau 10px\n    const elementHeight = (newSize === null || newSize === void 0 ? void 0 : newSize.height) || ((_element$size7 = element.size) === null || _element$size7 === void 0 ? void 0 : _element$size7.height) || 50;\n    const top = index * (elementHeight + 10); // 10px khoảng cách giữa các element\n    return {\n      x: left,\n      y: top,\n      z: fromPos.z || 1\n    };\n  }\n\n  // Scale position cho tablet và desktop\n  let scaledX = Math.round(fromPos.x * scaleFactor);\n  let scaledY = Math.round(fromPos.y * scaleFactor);\n\n  // Đảm bảo không overflow\n  const canvasWidth = toMode === 'mobile' ? 375 : toMode === 'tablet' ? 768 : 1200;\n  const elementWidth = (newSize === null || newSize === void 0 ? void 0 : newSize.width) || ((_element$size8 = element.size) === null || _element$size8 === void 0 ? void 0 : _element$size8.width) || 200;\n  if (scaledX + elementWidth > canvasWidth) {\n    scaledX = Math.max(0, canvasWidth - elementWidth - 10);\n  }\n  return {\n    x: Math.max(0, scaledX),\n    y: Math.max(0, scaledY),\n    z: fromPos.z || 1\n  };\n};\n\n/**\r\n * Scale styles (font, padding, margin, etc.)\r\n */\nexport const autoScaleStyles = (styles, fromMode, toMode) => {\n  if (!styles) return {};\n  const scaleFactor = getScaleFactor(fromMode, toMode);\n  const scaledStyles = {\n    ...styles\n  };\n\n  // Properties cần scale\n  const scalableProps = ['fontSize', 'padding', 'paddingTop', 'paddingBottom', 'paddingLeft', 'paddingRight', 'margin', 'marginTop', 'marginBottom', 'marginLeft', 'marginRight', 'borderRadius', 'gap', 'borderWidth', 'strokeWidth', 'lineHeight'];\n  scalableProps.forEach(prop => {\n    if (scaledStyles[prop]) {\n      const value = scaledStyles[prop];\n\n      // Parse number + unit\n      if (typeof value === 'string') {\n        const match = value.match(/^([\\d.]+)(px|rem|em|%)$/);\n        if (match) {\n          const num = parseFloat(match[1]);\n          const unit = match[2];\n\n          // Scale pixel values\n          if (unit === 'px') {\n            const scaled = Math.round(num * scaleFactor * 10) / 10;\n            // Minimum values\n            const min = prop.includes('font') ? 10 : 4;\n            scaledStyles[prop] = `${Math.max(scaled, min)}${unit}`;\n          }\n        }\n      } else if (typeof value === 'number') {\n        const scaled = Math.round(value * scaleFactor);\n        const min = prop.includes('font') ? 10 : 4;\n        scaledStyles[prop] = Math.max(scaled, min);\n      }\n    }\n  });\n\n  // Scale compound values (padding: \"10px 20px\")\n  if (scaledStyles.padding && typeof scaledStyles.padding === 'string' && scaledStyles.padding.includes(' ')) {\n    const values = scaledStyles.padding.split(' ');\n    const scaledValues = values.map(val => {\n      const match = val.match(/^([\\d.]+)(px|rem|em)$/);\n      if (match) {\n        const num = parseFloat(match[1]);\n        const unit = match[2];\n        const scaled = Math.round(num * scaleFactor * 10) / 10;\n        return `${Math.max(scaled, 4)}${unit}`;\n      }\n      return val;\n    });\n    scaledStyles.padding = scaledValues.join(' ');\n  }\n  return scaledStyles;\n};\n\n/**\r\n * Scale componentData (columns, images grid, etc.)\r\n */\nexport const autoScaleComponentData = (componentData, toMode) => {\n  if (!componentData) return {};\n  const scaled = {\n    ...componentData\n  };\n  if (toMode === 'mobile') {\n    // Giảm columns cho mobile\n    if (scaled.columns && scaled.columns > 2) {\n      scaled.columns = 1;\n    }\n\n    // Grid template columns cho gallery\n    if (scaled.images && scaled.images.length > 0) {\n      scaled.gridTemplateColumns = 'repeat(2, 1fr)'; // Mobile: 2 columns\n    }\n\n    // Scale gap\n    if (scaled.gap) {\n      const match = scaled.gap.match(/^([\\d.]+)(px|rem)$/);\n      if (match) {\n        const value = parseFloat(match[1]);\n        const unit = match[2];\n        scaled.gap = `${Math.max(value * 0.5, 8)}${unit}`;\n      }\n    }\n  } else if (toMode === 'tablet') {\n    // Giảm columns cho tablet\n    if (scaled.columns && scaled.columns > 3) {\n      scaled.columns = 2;\n    }\n    if (scaled.images && scaled.images.length > 0) {\n      scaled.gridTemplateColumns = 'repeat(3, 1fr)'; // Tablet: 3 columns\n    }\n  }\n  return scaled;\n};\n\n/**\r\n * MAIN FUNCTION: Sync element giữa các view modes\r\n */\nexport const syncElementBetweenModes = (element, changedMode) => {\n  const modes = ['desktop', 'tablet', 'mobile'];\n  const updatedElement = {\n    ...element\n  };\n\n  // Đảm bảo có position và size cho tất cả modes\n  if (!updatedElement.position) {\n    updatedElement.position = {\n      desktop: {\n        x: 0,\n        y: 0,\n        z: 1\n      },\n      tablet: {\n        x: 0,\n        y: 0,\n        z: 1\n      },\n      mobile: {\n        x: 0,\n        y: 0,\n        z: 1\n      }\n    };\n  }\n  if (!updatedElement.size) {\n    updatedElement.size = {\n      desktop: {\n        width: element.type === 'section' ? 1200 : 200,\n        height: 400\n      },\n      tablet: {\n        width: element.type === 'section' ? 768 : 200,\n        height: 400\n      },\n      mobile: {\n        width: element.type === 'section' ? 375 : 200,\n        height: 400\n      }\n    };\n  }\n\n  // Sync từ changedMode sang các modes khác\n  modes.forEach(targetMode => {\n    if (targetMode !== changedMode) {\n      // Scale size\n      const scaledSize = autoScaleSize(updatedElement, changedMode, targetMode);\n\n      // Scale position, truyền index để sắp xếp dọc trên mobile\n      const scaledPosition = autoScalePosition(updatedElement, changedMode, targetMode, scaledSize, element.index || 0);\n\n      // Update position\n      updatedElement.position[targetMode] = scaledPosition;\n\n      // Update size\n      updatedElement.size[targetMode] = scaledSize;\n    }\n  });\n\n  // Scale styles cho mobile và tablet\n  if (!updatedElement.responsiveStyles) {\n    updatedElement.responsiveStyles = {};\n  }\n  updatedElement.responsiveStyles.mobile = autoScaleStyles(updatedElement.styles, 'desktop', 'mobile');\n  updatedElement.responsiveStyles.tablet = autoScaleStyles(updatedElement.styles, 'desktop', 'tablet');\n\n  // Scale componentData\n  updatedElement.componentData = {\n    ...updatedElement.componentData,\n    mobile: autoScaleComponentData(updatedElement.componentData, 'mobile'),\n    tablet: autoScaleComponentData(updatedElement.componentData, 'tablet')\n  };\n\n  // Sync children nếu có\n  if (updatedElement.children && updatedElement.children.length > 0) {\n    updatedElement.children = updatedElement.children.map((child, index) => ({\n      ...syncElementBetweenModes(child, changedMode),\n      index // Gán index cho child để sắp xếp dọc\n    }));\n  }\n  return updatedElement;\n};\n\n/**\r\n * Sync toàn bộ pageData khi chuyển view mode\r\n */\nexport const syncAllElements = (pageData, currentMode) => {\n  return {\n    ...pageData,\n    elements: pageData.elements.map((element, index) => ({\n      ...syncElementBetweenModes(element, currentMode),\n      index // Gán index để sắp xếp dọc\n    }))\n  };\n};\n\n/**\r\n * Get responsive values dựa trên viewMode hiện tại\r\n */\nexport const getResponsiveValues = (element, viewMode) => {\n  var _element$size9, _element$position2, _element$responsiveSt, _element$responsiveSt2, _element$componentDat, _element$componentDat2;\n  const size = ((_element$size9 = element.size) === null || _element$size9 === void 0 ? void 0 : _element$size9[viewMode]) || {\n    width: element.type === 'section' ? viewMode === 'mobile' ? 375 : viewMode === 'tablet' ? 768 : 1200 : 200,\n    height: 400\n  };\n  const position = ((_element$position2 = element.position) === null || _element$position2 === void 0 ? void 0 : _element$position2[viewMode]) || {\n    x: 0,\n    y: 0,\n    z: 1\n  };\n  const styles = viewMode === 'mobile' && (_element$responsiveSt = element.responsiveStyles) !== null && _element$responsiveSt !== void 0 && _element$responsiveSt.mobile ? {\n    ...element.styles,\n    ...element.responsiveStyles.mobile\n  } : viewMode === 'tablet' && (_element$responsiveSt2 = element.responsiveStyles) !== null && _element$responsiveSt2 !== void 0 && _element$responsiveSt2.tablet ? {\n    ...element.styles,\n    ...element.responsiveStyles.tablet\n  } : element.styles || {};\n  const componentData = viewMode === 'mobile' && (_element$componentDat = element.componentData) !== null && _element$componentDat !== void 0 && _element$componentDat.mobile ? {\n    ...element.componentData,\n    ...element.componentData.mobile\n  } : viewMode === 'tablet' && (_element$componentDat2 = element.componentData) !== null && _element$componentDat2 !== void 0 && _element$componentDat2.tablet ? {\n    ...element.componentData,\n    ...element.componentData.tablet\n  } : element.componentData || {};\n  return {\n    id: element.id,\n    type: element.type,\n    size,\n    position,\n    styles,\n    componentData,\n    children: element.children || [],\n    visible: element.visible !== false\n  };\n};\n\n/**\r\n * Initialize responsive data cho elements chưa có\r\n */\nexport const initializeResponsiveData = pageData => {\n  return {\n    ...pageData,\n    elements: pageData.elements.map((element, index) => ({\n      ...syncElementBetweenModes(element, 'desktop'),\n      index // Gán index để sắp xếp dọc\n    }))\n  };\n};\n\n/**\r\n * Batch update khi user thay đổi nhiều elements\r\n */\nexport const batchSyncElements = (elements, changedMode) => {\n  return elements.map((element, index) => ({\n    ...syncElementBetweenModes(element, changedMode),\n    index // Gán index để sắp xếp dọc\n  }));\n};\nexport default {\n  getScaleFactor,\n  autoScaleSize,\n  autoScalePosition,\n  autoScaleStyles,\n  autoScaleComponentData,\n  syncElementBetweenModes,\n  syncAllElements,\n  getResponsiveValues,\n  initializeResponsiveData,\n  batchSyncElements\n};","map":{"version":3,"names":["getScaleFactor","fromMode","toMode","widths","desktop","tablet","mobile","autoScaleSize","element","_element$size4","_element$size5","scaleFactor","type","_element$size","width","height","size","_element$size2","_element$size3","baseWidth","baseHeight","scaledWidth","Math","round","scaledHeight","minSizes","button","icon","image","heading","paragraph","gallery","default","minSize","min","max","autoScalePosition","newSize","index","_element$position","_element$size8","fromPos","position","x","y","z","_element$size6","canvasWidth","elementWidth","_element$size7","left","elementHeight","top","scaledX","scaledY","autoScaleStyles","styles","scaledStyles","scalableProps","forEach","prop","value","match","num","parseFloat","unit","scaled","includes","padding","values","split","scaledValues","map","val","join","autoScaleComponentData","componentData","columns","images","length","gridTemplateColumns","gap","syncElementBetweenModes","changedMode","modes","updatedElement","targetMode","scaledSize","scaledPosition","responsiveStyles","children","child","syncAllElements","pageData","currentMode","elements","getResponsiveValues","viewMode","_element$size9","_element$position2","_element$responsiveSt","_element$responsiveSt2","_element$componentDat","_element$componentDat2","id","visible","initializeResponsiveData","batchSyncElements"],"sources":["F:/landinghub-iconic/apps/web/src/utils/responsiveSync.js"],"sourcesContent":["/**\r\n * Tính scale factor giữa các view modes\r\n */\r\nexport const getScaleFactor = (fromMode, toMode) => {\r\n    const widths = {\r\n        desktop: 1200,\r\n        tablet: 768,\r\n        mobile: 375\r\n    };\r\n    return widths[toMode] / widths[fromMode];\r\n};\r\n\r\n/**\r\n * Tự động scale size cho element\r\n */\r\nexport const autoScaleSize = (element, fromMode, toMode) => {\r\n    const scaleFactor = getScaleFactor(fromMode, toMode);\r\n\r\n    // Section luôn full-width\r\n    if (element.type === 'section') {\r\n        return {\r\n            width: toMode === 'mobile' ? 375 : toMode === 'tablet' ? 768 : 1200,\r\n            height: element.size?.height || 400\r\n        };\r\n    }\r\n\r\n    // Popup có width cố định\r\n    if (element.type === 'popup' || element.type === 'modal') {\r\n        return {\r\n            width: toMode === 'mobile' ? 340 : toMode === 'tablet' ? 600 : element.size?.width || 600,\r\n            height: element.size?.height || 400\r\n        };\r\n    }\r\n\r\n    // Scale các element khác\r\n    const baseWidth = element.size?.width || 200;\r\n    const baseHeight = element.size?.height || 50;\r\n\r\n    let scaledWidth = Math.round(baseWidth * scaleFactor);\r\n    let scaledHeight = Math.round(baseHeight * scaleFactor);\r\n\r\n    // Minimum sizes theo type\r\n    const minSizes = {\r\n        button: { width: 80, height: 32 },\r\n        icon: { width: 24, height: 24 },\r\n        image: { width: 100, height: 100 },\r\n        heading: { width: 150, height: 24 },\r\n        paragraph: { width: 200, height: 40 },\r\n        gallery: { width: 300, height: 200 },\r\n        default: { width: 100, height: 40 }\r\n    };\r\n\r\n    const minSize = minSizes[element.type] || minSizes.default;\r\n\r\n    // Maximum width cho mobile\r\n    if (toMode === 'mobile') {\r\n        scaledWidth = Math.min(scaledWidth, 340); // Để có padding 2 bên\r\n    }\r\n\r\n    return {\r\n        width: Math.max(scaledWidth, minSize.width),\r\n        height: Math.max(scaledHeight, minSize.height)\r\n    };\r\n};\r\n\r\n/**\r\n * Tự động scale position cho element\r\n */\r\nexport const autoScalePosition = (element, fromMode, toMode, newSize, index = 0) => {\r\n    const fromPos = element.position?.[fromMode] || { x: 0, y: 0, z: 1 };\r\n    const scaleFactor = getScaleFactor(fromMode, toMode);\r\n\r\n    // Section luôn x = 0\r\n    if (element.type === 'section') {\r\n        return {\r\n            x: 0,\r\n            y: fromPos.y,\r\n            z: fromPos.z || 1\r\n        };\r\n    }\r\n\r\n    // Popup center\r\n    if (element.type === 'popup' || element.type === 'modal') {\r\n        const canvasWidth = toMode === 'mobile' ? 375 : toMode === 'tablet' ? 768 : 1200;\r\n        const elementWidth = newSize?.width || element.size?.width || 600;\r\n        return {\r\n            x: (canvasWidth - elementWidth) / 2, // Center popup\r\n            y: fromPos.y,\r\n            z: fromPos.z || 1001\r\n        };\r\n    }\r\n\r\n    // Các element khác trong mobile\r\n    if (toMode === 'mobile') {\r\n        // Đặt left cố định là 10px\r\n        const left = 10;\r\n        // Sắp xếp dọc, mỗi element cách nhau 10px\r\n        const elementHeight = newSize?.height || element.size?.height || 50;\r\n        const top = index * (elementHeight + 10); // 10px khoảng cách giữa các element\r\n        return {\r\n            x: left,\r\n            y: top,\r\n            z: fromPos.z || 1\r\n        };\r\n    }\r\n\r\n    // Scale position cho tablet và desktop\r\n    let scaledX = Math.round(fromPos.x * scaleFactor);\r\n    let scaledY = Math.round(fromPos.y * scaleFactor);\r\n\r\n    // Đảm bảo không overflow\r\n    const canvasWidth = toMode === 'mobile' ? 375 : toMode === 'tablet' ? 768 : 1200;\r\n    const elementWidth = newSize?.width || element.size?.width || 200;\r\n\r\n    if (scaledX + elementWidth > canvasWidth) {\r\n        scaledX = Math.max(0, canvasWidth - elementWidth - 10);\r\n    }\r\n\r\n    return {\r\n        x: Math.max(0, scaledX),\r\n        y: Math.max(0, scaledY),\r\n        z: fromPos.z || 1\r\n    };\r\n};\r\n\r\n/**\r\n * Scale styles (font, padding, margin, etc.)\r\n */\r\nexport const autoScaleStyles = (styles, fromMode, toMode) => {\r\n    if (!styles) return {};\r\n\r\n    const scaleFactor = getScaleFactor(fromMode, toMode);\r\n    const scaledStyles = { ...styles };\r\n\r\n    // Properties cần scale\r\n    const scalableProps = [\r\n        'fontSize', 'padding', 'paddingTop', 'paddingBottom',\r\n        'paddingLeft', 'paddingRight', 'margin', 'marginTop',\r\n        'marginBottom', 'marginLeft', 'marginRight', 'borderRadius',\r\n        'gap', 'borderWidth', 'strokeWidth', 'lineHeight'\r\n    ];\r\n\r\n    scalableProps.forEach(prop => {\r\n        if (scaledStyles[prop]) {\r\n            const value = scaledStyles[prop];\r\n\r\n            // Parse number + unit\r\n            if (typeof value === 'string') {\r\n                const match = value.match(/^([\\d.]+)(px|rem|em|%)$/);\r\n                if (match) {\r\n                    const num = parseFloat(match[1]);\r\n                    const unit = match[2];\r\n\r\n                    // Scale pixel values\r\n                    if (unit === 'px') {\r\n                        const scaled = Math.round(num * scaleFactor * 10) / 10;\r\n                        // Minimum values\r\n                        const min = prop.includes('font') ? 10 : 4;\r\n                        scaledStyles[prop] = `${Math.max(scaled, min)}${unit}`;\r\n                    }\r\n                }\r\n            } else if (typeof value === 'number') {\r\n                const scaled = Math.round(value * scaleFactor);\r\n                const min = prop.includes('font') ? 10 : 4;\r\n                scaledStyles[prop] = Math.max(scaled, min);\r\n            }\r\n        }\r\n    });\r\n\r\n    // Scale compound values (padding: \"10px 20px\")\r\n    if (scaledStyles.padding && typeof scaledStyles.padding === 'string' && scaledStyles.padding.includes(' ')) {\r\n        const values = scaledStyles.padding.split(' ');\r\n        const scaledValues = values.map(val => {\r\n            const match = val.match(/^([\\d.]+)(px|rem|em)$/);\r\n            if (match) {\r\n                const num = parseFloat(match[1]);\r\n                const unit = match[2];\r\n                const scaled = Math.round(num * scaleFactor * 10) / 10;\r\n                return `${Math.max(scaled, 4)}${unit}`;\r\n            }\r\n            return val;\r\n        });\r\n        scaledStyles.padding = scaledValues.join(' ');\r\n    }\r\n\r\n    return scaledStyles;\r\n};\r\n\r\n/**\r\n * Scale componentData (columns, images grid, etc.)\r\n */\r\nexport const autoScaleComponentData = (componentData, toMode) => {\r\n    if (!componentData) return {};\r\n\r\n    const scaled = { ...componentData };\r\n\r\n    if (toMode === 'mobile') {\r\n        // Giảm columns cho mobile\r\n        if (scaled.columns && scaled.columns > 2) {\r\n            scaled.columns = 1;\r\n        }\r\n\r\n        // Grid template columns cho gallery\r\n        if (scaled.images && scaled.images.length > 0) {\r\n            scaled.gridTemplateColumns = 'repeat(2, 1fr)'; // Mobile: 2 columns\r\n        }\r\n\r\n        // Scale gap\r\n        if (scaled.gap) {\r\n            const match = scaled.gap.match(/^([\\d.]+)(px|rem)$/);\r\n            if (match) {\r\n                const value = parseFloat(match[1]);\r\n                const unit = match[2];\r\n                scaled.gap = `${Math.max(value * 0.5, 8)}${unit}`;\r\n            }\r\n        }\r\n    } else if (toMode === 'tablet') {\r\n        // Giảm columns cho tablet\r\n        if (scaled.columns && scaled.columns > 3) {\r\n            scaled.columns = 2;\r\n        }\r\n\r\n        if (scaled.images && scaled.images.length > 0) {\r\n            scaled.gridTemplateColumns = 'repeat(3, 1fr)'; // Tablet: 3 columns\r\n        }\r\n    }\r\n\r\n    return scaled;\r\n};\r\n\r\n/**\r\n * MAIN FUNCTION: Sync element giữa các view modes\r\n */\r\nexport const syncElementBetweenModes = (element, changedMode) => {\r\n    const modes = ['desktop', 'tablet', 'mobile'];\r\n    const updatedElement = { ...element };\r\n\r\n    // Đảm bảo có position và size cho tất cả modes\r\n    if (!updatedElement.position) {\r\n        updatedElement.position = {\r\n            desktop: { x: 0, y: 0, z: 1 },\r\n            tablet: { x: 0, y: 0, z: 1 },\r\n            mobile: { x: 0, y: 0, z: 1 }\r\n        };\r\n    }\r\n\r\n    if (!updatedElement.size) {\r\n        updatedElement.size = {\r\n            desktop: { width: element.type === 'section' ? 1200 : 200, height: 400 },\r\n            tablet: { width: element.type === 'section' ? 768 : 200, height: 400 },\r\n            mobile: { width: element.type === 'section' ? 375 : 200, height: 400 }\r\n        };\r\n    }\r\n\r\n    // Sync từ changedMode sang các modes khác\r\n    modes.forEach(targetMode => {\r\n        if (targetMode !== changedMode) {\r\n            // Scale size\r\n            const scaledSize = autoScaleSize(updatedElement, changedMode, targetMode);\r\n\r\n            // Scale position, truyền index để sắp xếp dọc trên mobile\r\n            const scaledPosition = autoScalePosition(updatedElement, changedMode, targetMode, scaledSize, element.index || 0);\r\n\r\n            // Update position\r\n            updatedElement.position[targetMode] = scaledPosition;\r\n\r\n            // Update size\r\n            updatedElement.size[targetMode] = scaledSize;\r\n        }\r\n    });\r\n\r\n    // Scale styles cho mobile và tablet\r\n    if (!updatedElement.responsiveStyles) {\r\n        updatedElement.responsiveStyles = {};\r\n    }\r\n\r\n    updatedElement.responsiveStyles.mobile = autoScaleStyles(\r\n        updatedElement.styles,\r\n        'desktop',\r\n        'mobile'\r\n    );\r\n\r\n    updatedElement.responsiveStyles.tablet = autoScaleStyles(\r\n        updatedElement.styles,\r\n        'desktop',\r\n        'tablet'\r\n    );\r\n\r\n    // Scale componentData\r\n    updatedElement.componentData = {\r\n        ...updatedElement.componentData,\r\n        mobile: autoScaleComponentData(updatedElement.componentData, 'mobile'),\r\n        tablet: autoScaleComponentData(updatedElement.componentData, 'tablet')\r\n    };\r\n\r\n    // Sync children nếu có\r\n    if (updatedElement.children && updatedElement.children.length > 0) {\r\n        updatedElement.children = updatedElement.children.map((child, index) => ({\r\n            ...syncElementBetweenModes(child, changedMode),\r\n            index // Gán index cho child để sắp xếp dọc\r\n        }));\r\n    }\r\n\r\n    return updatedElement;\r\n};\r\n\r\n/**\r\n * Sync toàn bộ pageData khi chuyển view mode\r\n */\r\nexport const syncAllElements = (pageData, currentMode) => {\r\n    return {\r\n        ...pageData,\r\n        elements: pageData.elements.map((element, index) => ({\r\n            ...syncElementBetweenModes(element, currentMode),\r\n            index // Gán index để sắp xếp dọc\r\n        }))\r\n    };\r\n};\r\n\r\n/**\r\n * Get responsive values dựa trên viewMode hiện tại\r\n */\r\nexport const getResponsiveValues = (element, viewMode) => {\r\n    const size = element.size?.[viewMode] || {\r\n        width: element.type === 'section' ? (viewMode === 'mobile' ? 375 : viewMode === 'tablet' ? 768 : 1200) : 200,\r\n        height: 400\r\n    };\r\n\r\n    const position = element.position?.[viewMode] || { x: 0, y: 0, z: 1 };\r\n\r\n    const styles = viewMode === 'mobile' && element.responsiveStyles?.mobile\r\n        ? { ...element.styles, ...element.responsiveStyles.mobile }\r\n        : viewMode === 'tablet' && element.responsiveStyles?.tablet\r\n            ? { ...element.styles, ...element.responsiveStyles.tablet }\r\n            : element.styles || {};\r\n\r\n    const componentData = viewMode === 'mobile' && element.componentData?.mobile\r\n        ? { ...element.componentData, ...element.componentData.mobile }\r\n        : viewMode === 'tablet' && element.componentData?.tablet\r\n            ? { ...element.componentData, ...element.componentData.tablet }\r\n            : element.componentData || {};\r\n\r\n    return {\r\n        id: element.id,\r\n        type: element.type,\r\n        size,\r\n        position,\r\n        styles,\r\n        componentData,\r\n        children: element.children || [],\r\n        visible: element.visible !== false\r\n    };\r\n};\r\n\r\n/**\r\n * Initialize responsive data cho elements chưa có\r\n */\r\nexport const initializeResponsiveData = (pageData) => {\r\n    return {\r\n        ...pageData,\r\n        elements: pageData.elements.map((element, index) => ({\r\n            ...syncElementBetweenModes(element, 'desktop'),\r\n            index // Gán index để sắp xếp dọc\r\n        }))\r\n    };\r\n};\r\n\r\n/**\r\n * Batch update khi user thay đổi nhiều elements\r\n */\r\nexport const batchSyncElements = (elements, changedMode) => {\r\n    return elements.map((element, index) => ({\r\n        ...syncElementBetweenModes(element, changedMode),\r\n        index // Gán index để sắp xếp dọc\r\n    }));\r\n};\r\n\r\nexport default {\r\n    getScaleFactor,\r\n    autoScaleSize,\r\n    autoScalePosition,\r\n    autoScaleStyles,\r\n    autoScaleComponentData,\r\n    syncElementBetweenModes,\r\n    syncAllElements,\r\n    getResponsiveValues,\r\n    initializeResponsiveData,\r\n    batchSyncElements\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}