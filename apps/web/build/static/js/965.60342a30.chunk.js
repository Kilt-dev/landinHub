"use strict";(self.webpackChunklandinghub_web=self.webpackChunklandinghub_web||[]).push([[965],{4965:(a,s,e)=>{e.r(s),e.d(s,{default:()=>r});var t=e(8962),l=e(7369),n=e(9242),c=e(6859),d=e(9930);const r=()=>{const[a,s]=(0,t.useState)({pages:{total:0,live:0,draft:0,totalViews:"0",totalRevenue:"0\u0111"},purchases:{count:0,totalSpent:"0\u0111",avgPerPurchase:"0\u0111",totalSpentRaw:0},sales:{count:0,totalEarned:"0\u0111",avgPerSale:"0\u0111",totalEarnedRaw:0},balance:{amount:"0\u0111",amountRaw:0,status:"neutral"},pagesList:[]}),[e,r]=(0,t.useState)(!0),[i,h]=(0,t.useState)(null),o=async()=>{try{var a;r(!0),h(null),console.log("\ud83d\udce1 Fetching dashboard data...");const e=await c.A.get("/api/dashboard/data");if(console.log("\u2705 Dashboard API Response:",e.data),console.log("\ud83d\udcca Pages Data:",e.data.data.pages),console.log("\ud83d\udccb Pages List Length:",null===(a=e.data.data.pagesList)||void 0===a?void 0:a.length),!e.data.success||!e.data.data)throw new Error("Invalid response structure");s(e.data.data),console.log("\u2705 State Updated - Total Pages:",e.data.data.pages.total)}catch(i){console.error("\u274c Dashboard Error:",i),h(i.message)}finally{r(!1)}};return(0,t.useEffect)(()=>{o();if(initSocket()){joinDashboard();const a=onDashboardUpdate(a=>{console.log("\ud83d\udcca Dashboard update received:",a),o()});return()=>{a(),leaveDashboard()}}},[]),e?(0,d.jsxs)("div",{className:"dashboard-loading",children:[(0,d.jsx)(l.A,{className:"spin",size:48}),(0,d.jsx)("p",{children:"\u0110ang t\u1ea3i dashboard..."})]}):i?(0,d.jsxs)("div",{className:"dashboard-error",children:[(0,d.jsx)(n.A,{size:48,color:"#ef4444"}),(0,d.jsx)("h3",{children:"Kh\xf4ng th\u1ec3 t\u1ea3i dashboard"}),(0,d.jsx)("p",{children:i}),(0,d.jsxs)("button",{onClick:o,className:"btn-retry",children:[(0,d.jsx)(l.A,{size:18})," Th\u1eed l\u1ea1i"]})]}):(0,d.jsxs)("div",{className:"user-dashboard",children:[(0,d.jsxs)("div",{className:"dashboard-header",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"dashboard-title",children:"Dashboard"}),(0,d.jsx)("p",{className:"dashboard-subtitle",children:"Hi\u1ec7u su\u1ea5t kinh doanh v\xe0 marketplace c\u1ee7a b\u1ea1n"})]}),(0,d.jsx)("button",{onClick:o,className:"btn-refresh",children:"L\xe0m m\u1edbi"})]}),(0,d.jsxs)("div",{className:"welcome-banner",children:[(0,d.jsxs)("div",{className:"banner-content",children:[(0,d.jsx)("h2",{children:"Xin ch\xe0o! \ud83d\udc4b"}),(0,d.jsxs)("p",{children:["B\u1ea1n \u0111ang qu\u1ea3n l\xfd ",(0,d.jsxs)("strong",{children:[a.pages.total," landing pages"]})," v\u1edbi"," ",(0,d.jsxs)("strong",{children:[a.pages.totalViews," l\u01b0\u1ee3t truy c\u1eadp"]})]})]}),(0,d.jsxs)("div",{className:"banner-stats",children:[(0,d.jsxs)("div",{className:"banner-stat",children:[(0,d.jsx)("div",{className:"banner-stat-value",children:a.pages.live}),(0,d.jsx)("div",{className:"banner-stat-label",children:"\u0110ANG HO\u1ea0T \u0110\u1ed8NG"})]}),(0,d.jsxs)("div",{className:"banner-stat",children:[(0,d.jsx)("div",{className:"banner-stat-value",children:a.pages.draft}),(0,d.jsx)("div",{className:"banner-stat-label",children:"B\u1ea2N NH\xc1P"})]})]})]}),(0,d.jsxs)("div",{className:"stats-grid",children:[(0,d.jsxs)("div",{className:"stat-card modern marketplace-revenue highlighted",children:[(0,d.jsx)("div",{className:"stat-header",children:(0,d.jsx)("span",{className:"stat-label",children:"Doanh Thu Marketplace"})}),(0,d.jsx)("div",{className:"stat-value",children:a.sales.totalEarned}),(0,d.jsxs)("div",{className:"stat-footer",children:[(0,d.jsxs)("span",{className:"stat-meta",children:[a.sales.count," s\u1ea3n ph\u1ea9m \u0111\xe3 b\xe1n"]}),(0,d.jsxs)("span",{className:"stat-secondary",children:["TB: ",a.sales.avgPerSale]})]})]}),(0,d.jsxs)("div",{className:"stat-card modern views",children:[(0,d.jsx)("div",{className:"stat-header",children:(0,d.jsx)("span",{className:"stat-label",children:"L\u01b0\u1ee3t Xem Landing Pages"})}),(0,d.jsx)("div",{className:"stat-value",children:a.pages.totalViews}),(0,d.jsx)("div",{className:"stat-footer",children:(0,d.jsxs)("span",{className:"stat-meta",children:[a.pages.total," landing pages"]})})]}),(0,d.jsxs)("div",{className:"stat-card modern leads",children:[(0,d.jsx)("div",{className:"stat-header",children:(0,d.jsx)("span",{className:"stat-label",children:"T\u1ed5ng Giao D\u1ecbch"})}),(0,d.jsx)("div",{className:"stat-value",children:a.purchases.count+a.sales.count}),(0,d.jsx)("div",{className:"stat-footer",children:(0,d.jsx)("span",{className:"stat-meta",children:"Mua & B\xe1n marketplace"})})]}),(0,d.jsxs)("div",{className:"stat-card modern purchases",children:[(0,d.jsx)("div",{className:"stat-header",children:(0,d.jsx)("span",{className:"stat-label",children:"\u0110\u1ea7u T\u01b0 Mua S\u1eafm"})}),(0,d.jsx)("div",{className:"stat-value",children:a.purchases.totalSpent}),(0,d.jsxs)("div",{className:"stat-footer",children:[(0,d.jsxs)("span",{className:"stat-meta",children:[a.purchases.count," giao d\u1ecbch mua"]}),(0,d.jsxs)("span",{className:"stat-secondary",children:["TB: ",a.purchases.avgPerPurchase]})]})]}),(0,d.jsxs)("div",{className:"stat-card modern balance ".concat(a.balance.status),children:[(0,d.jsxs)("div",{className:"stat-header",children:[(0,d.jsx)("span",{className:"stat-label",children:"L\u1ee3i Nhu\u1eadn R\xf2ng"}),(0,d.jsx)("span",{className:"balance-badge ".concat(a.balance.status),children:"positive"===a.balance.status?"Sinh l\u1eddi":"\u0110ang \u0111\u1ea7u t\u01b0"})]}),(0,d.jsx)("div",{className:"stat-value",children:a.balance.amount}),(0,d.jsx)("div",{className:"stat-footer",children:(0,d.jsx)("span",{className:"stat-meta",children:"Doanh thu - Chi ph\xed"})})]}),(0,d.jsxs)("div",{className:"stat-card modern activity",children:[(0,d.jsx)("div",{className:"stat-header",children:(0,d.jsx)("span",{className:"stat-label",children:"T\u1ed5ng Landing Pages"})}),(0,d.jsx)("div",{className:"stat-value",children:a.pages.total}),(0,d.jsx)("div",{className:"stat-footer",children:(0,d.jsxs)("span",{className:"stat-meta",children:[a.pages.live," \u0111ang ho\u1ea1t \u0111\u1ed9ng, ",a.pages.draft," nh\xe1p"]})})]})]}),(0,d.jsxs)("div",{className:"quick-actions",children:[(0,d.jsx)("a",{href:"/pages",className:"action-btn primary",children:"Qu\u1ea3n l\xfd Pages"}),(0,d.jsx)("a",{href:"/create-landing",className:"action-btn secondary",children:"T\u1ea1o Page M\u1edbi"}),(0,d.jsx)("a",{href:"/marketplace",className:"action-btn secondary",children:"Marketplace"})]})]})}}}]);