/*! For license information please see 589.2a63bd32.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunklandinghub_web=self.webpackChunklandinghub_web||[]).push([[589],{1589:(s,e,a)=>{a.r(e),a.d(e,{default:()=>j});var c=a(8962),i=a(7369),d=a(9242),l=a(3805),n=a(908);const r=(0,a(5999).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var t=a(7056),h=a(8595),o=a(6859),m=a(9930);const x=()=>{var s;const[e,a]=(0,c.useState)(!0),[x,j]=(0,c.useState)(null),[v,u]=(0,c.useState)(null),N=async()=>{try{a(!0),u(null),console.log("\ud83d\udce1 Fetching admin dashboard data...");const s=await o.A.get("api/reports/admin/system");if(console.log("\u2705 Admin Dashboard API Response:",s.data),!s.data.success)throw new Error("Invalid response structure");j(s.data.data)}catch(v){console.error("\u274c Error fetching admin dashboard:",v),u(v.message||"Kh\xf4ng th\u1ec3 t\u1ea3i dashboard")}finally{a(!1)}};if((0,c.useEffect)(()=>{N()},[]),e)return(0,m.jsxs)("div",{className:"admin-dashboard-loading",children:[(0,m.jsx)(i.A,{className:"spin",size:48}),(0,m.jsx)("p",{children:"\u0110ang t\u1ea3i dashboard..."})]});if(v)return(0,m.jsxs)("div",{className:"admin-dashboard-error",children:[(0,m.jsx)(d.A,{size:48,color:"#ef4444"}),(0,m.jsx)("h3",{children:"Kh\xf4ng th\u1ec3 t\u1ea3i dashboard"}),(0,m.jsx)("p",{children:v}),(0,m.jsxs)("button",{onClick:N,className:"btn-retry",children:[(0,m.jsx)(i.A,{size:18})," Th\u1eed l\u1ea1i"]})]});if(!x)return(0,m.jsx)("div",{className:"admin-dashboard-error",children:(0,m.jsx)("p",{children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"})});const{overview:p,transactions:b,marketplace:g,topSellers:y,topBuyers:f,dailyRevenue:A}=x;return(0,m.jsxs)("div",{className:"admin-dashboard",children:[(0,m.jsxs)("div",{className:"dashboard-header",children:[(0,m.jsxs)("div",{className:"header-content",children:[(0,m.jsx)("h1",{children:"Admin Dashboard"}),(0,m.jsx)("p",{children:"T\u1ed5ng quan h\u1ec7 th\u1ed1ng v\xe0 hi\u1ec7u su\u1ea5t"})]}),(0,m.jsxs)("button",{onClick:N,className:"btn-refresh",children:[(0,m.jsx)(i.A,{size:18})," L\xe0m m\u1edbi"]})]}),(0,m.jsxs)("div",{className:"overview-grid",children:[(0,m.jsxs)("div",{className:"stat-card revenue",children:[(0,m.jsx)("div",{className:"card-icon",children:(0,m.jsx)(l.A,{size:40})}),(0,m.jsxs)("div",{className:"card-content",children:[(0,m.jsx)("h3",{children:"T\u1ed5ng Doanh Thu"}),(0,m.jsx)("div",{className:"value",children:p.totalRevenue}),(0,m.jsx)("div",{className:"meta",children:"T\u1ea5t c\u1ea3 giao d\u1ecbch"})]})]}),(0,m.jsxs)("div",{className:"stat-card fees",children:[(0,m.jsx)("div",{className:"card-icon",children:(0,m.jsx)(n.A,{size:40})}),(0,m.jsxs)("div",{className:"card-content",children:[(0,m.jsx)("h3",{children:"Platform Fees"}),(0,m.jsx)("div",{className:"value",children:p.platformFees}),(0,m.jsxs)("div",{className:"meta",children:[p.feePercentage," c\u1ee7a doanh thu"]})]})]}),(0,m.jsxs)("div",{className:"stat-card pages",children:[(0,m.jsx)("div",{className:"card-icon",children:(0,m.jsx)(r,{size:40})}),(0,m.jsxs)("div",{className:"card-content",children:[(0,m.jsx)("h3",{children:"Marketplace Pages"}),(0,m.jsx)("div",{className:"value",children:g.totalPages}),(0,m.jsx)("div",{className:"meta",children:g.byStatus.map((s,e)=>(0,m.jsxs)("span",{children:[s.count," ",s._id,e<g.byStatus.length-1?" \u2022 ":""]},e))})]})]}),(0,m.jsxs)("div",{className:"stat-card transactions",children:[(0,m.jsx)("div",{className:"card-icon",children:(0,m.jsx)(t.A,{size:40})}),(0,m.jsxs)("div",{className:"card-content",children:[(0,m.jsx)("h3",{children:"Giao D\u1ecbch"}),(0,m.jsx)("div",{className:"value",children:b.byStatus.reduce((s,e)=>s+e.count,0)}),(0,m.jsxs)("div",{className:"meta",children:[(null===(s=b.byStatus.find(s=>"COMPLETED"===s.status))||void 0===s?void 0:s.count)||0," th\xe0nh c\xf4ng"]})]})]})]}),(0,m.jsxs)("div",{className:"section",children:[(0,m.jsx)("h2",{children:"\ud83d\udcca Giao D\u1ecbch Theo Tr\u1ea1ng Th\xe1i"}),(0,m.jsx)("div",{className:"transaction-grid",children:b.byStatus.map((s,e)=>(0,m.jsxs)("div",{className:"transaction-card status-".concat(s.status.toLowerCase()),children:[(0,m.jsx)("div",{className:"status",children:s.status}),(0,m.jsx)("div",{className:"count",children:s.count}),(0,m.jsx)("div",{className:"label",children:"giao d\u1ecbch"}),(0,m.jsx)("div",{className:"amount",children:s.totalAmount}),(0,m.jsxs)("div",{className:"fees",children:["Ph\xed: ",s.platformFees]})]},e))})]}),(0,m.jsxs)("div",{className:"two-column-section",children:[(0,m.jsxs)("div",{className:"section",children:[(0,m.jsx)("h2",{children:"\ud83c\udfc6 Top 5 Sellers"}),(0,m.jsx)("div",{className:"top-list",children:y.slice(0,5).map(s=>(0,m.jsxs)("div",{className:"top-item",children:[(0,m.jsxs)("div",{className:"rank",children:["#",s.rank]}),(0,m.jsxs)("div",{className:"info",children:[(0,m.jsxs)("div",{className:"id",children:[s.sellerId.substring(0,12),"..."]}),(0,m.jsxs)("div",{className:"stats",children:[s.totalSales," sales \u2022 ",s.totalRevenue]})]})]},s.sellerId))})]}),(0,m.jsxs)("div",{className:"section",children:[(0,m.jsx)("h2",{children:"\ud83d\udcb0 Top 5 Buyers"}),(0,m.jsx)("div",{className:"top-list",children:f.slice(0,5).map(s=>(0,m.jsxs)("div",{className:"top-item",children:[(0,m.jsxs)("div",{className:"rank",children:["#",s.rank]}),(0,m.jsxs)("div",{className:"info",children:[(0,m.jsxs)("div",{className:"id",children:[s.buyerId.substring(0,12),"..."]}),(0,m.jsxs)("div",{className:"stats",children:[s.totalPurchases," purchases \u2022 ",s.totalSpent]})]})]},s.buyerId))})]})]}),(0,m.jsxs)("div",{className:"section",children:[(0,m.jsx)("h2",{children:"\ud83d\udcc8 Doanh Thu 30 Ng\xe0y G\u1ea7n Nh\u1ea5t"}),(0,m.jsx)("div",{className:"daily-chart",children:A.slice(-30).map((s,e)=>{const a=Math.max(...A.map(s=>s.revenueRaw)),c=a>0?s.revenueRaw/a*100:0;return(0,m.jsxs)("div",{className:"chart-bar-wrapper",children:[(0,m.jsxs)("div",{className:"bar-info",children:[(0,m.jsx)("span",{className:"value",children:s.revenueRaw>0?s.revenue.replace("\u20ab",""):"0"}),(0,m.jsxs)("span",{className:"count",children:[s.count," GD"]})]}),(0,m.jsx)("div",{className:"chart-bar",style:{height:"".concat(Math.max(c,5),"%")},children:(0,m.jsx)("div",{className:"bar-fill"})}),(0,m.jsx)("div",{className:"bar-label",children:s.date.split("/").slice(0,2).join("/")})]},e)})})]}),b.byPaymentMethod&&b.byPaymentMethod.length>0&&(0,m.jsxs)("div",{className:"section",children:[(0,m.jsx)("h2",{children:"\ud83d\udcb3 Ph\u01b0\u01a1ng Th\u1ee9c Thanh To\xe1n"}),(0,m.jsx)("div",{className:"payment-grid",children:b.byPaymentMethod.map((s,e)=>(0,m.jsxs)("div",{className:"payment-card",children:[(0,m.jsx)(h.A,{size:32}),(0,m.jsx)("div",{className:"method",children:s.method||"N/A"}),(0,m.jsxs)("div",{className:"count",children:[s.count," GD"]}),(0,m.jsx)("div",{className:"amount",children:s.totalAmount})]},e))})]}),(0,m.jsx)("div",{className:"dashboard-footer",children:(0,m.jsxs)("p",{children:["C\u1eadp nh\u1eadt l\xfac: ",new Date(x.generatedAt).toLocaleString("vi-VN")]})})]})},j=c.memo(x)}}]);