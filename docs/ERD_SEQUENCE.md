# ERD VÃ€ SEQUENCE DIAGRAMS - LANDINGHUB

# 5. SÆ  Äá»’ ERD (Entity Relationship Diagram)

## 5.1. ERD Tá»•ng Quan

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DATABASE: MongoDB (landinghub)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       users         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK _id: ObjectId    â”‚
â”‚    email: String â—„â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” UNIQUE
â”‚    password: String â”‚          â”‚
â”‚    name: String     â”‚          â”‚
â”‚    role: String     â”‚          â”‚
â”‚    avatar: String   â”‚          â”‚
â”‚    balance: Number  â”‚          â”‚
â”‚    createdAt: Date  â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
           â”‚                     â”‚
           â”‚ 1                   â”‚
           â”‚                     â”‚
           â”‚ *                   â”‚
           â–¼                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚       pages         â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚ PK _id: String(UUID)â”‚          â”‚
â”‚ FK user_id: ObjectIdâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚    name: String     â”‚
â”‚    url: String â—„â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ UNIQUE (subdomain)
â”‚    template: String â”‚
â”‚    content: Object  â”‚
â”‚    html: String     â”‚
â”‚    css: String      â”‚
â”‚    status: String   â”‚
â”‚    viewCount: Numberâ”‚
â”‚    screenshot: Stringâ”‚
â”‚    publishedAt: Dateâ”‚
â”‚    createdAt: Date  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1
           â”‚
           â”‚ *
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   formsubmissions       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK _id: ObjectId        â”‚
â”‚ FK page_id: String â”€â”€â”€â”€â”€â”¼â”€â”€â–º pages._id
â”‚ FK user_id: ObjectId â”€â”€â”€â”¼â”€â”€â–º users._id
â”‚    form_id: String      â”‚
â”‚    form_data: Map       â”‚
â”‚    status: String       â”‚
â”‚    tags: [String]       â”‚
â”‚    metadata: Object     â”‚
â”‚    submitted_at: Date   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   marketplacepages      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK _id: String (UUID)   â”‚
â”‚ FK page_id: String â”€â”€â”€â”€â”€â”¼â”€â”€â–º pages._id
â”‚ FK seller_id: ObjectId â”€â”¼â”€â”€â–º users._id
â”‚    title: String        â”‚
â”‚    description: String  â”‚
â”‚    category: String     â”‚
â”‚    price: Number        â”‚
â”‚    images: [String]     â”‚
â”‚    status: String       â”‚
â”‚    sold_count: Number   â”‚
â”‚    rating: Number       â”‚
â”‚    createdAt: Date      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚               â”‚
           â”‚ *             â”‚ *
           â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     orders      â”‚  â”‚      reviews        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK _id: ObjectIdâ”‚  â”‚ PK _id: ObjectId    â”‚
â”‚    orderId: UUIDâ”‚  â”‚ FK marketplacePageIdâ”‚â”€â”€â–º marketplacepages._id
â”‚ FK transactionIdâ”‚â”€â”€â”â”‚ FK userId: ObjectId â”‚â”€â”€â–º users._id
â”‚ FK buyerId â”€â”€â”€â”€â”€â”¼â”€â”€â”¤â”‚    rating: Number   â”‚
â”‚ FK sellerId â”€â”€â”€â”€â”¼â”€â”€â”¤â”‚    comment: String  â”‚
â”‚ FK marketplacePgâ”‚â”€â”€â”˜â”‚    verified: Booleanâ”‚
â”‚ FK createdPageIdâ”‚   â”‚    createdAt: Date  â”‚
â”‚    price: Numberâ”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚    status: Stringâ”‚
â”‚    createdAt: Dateâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â–²
           â”‚
           â”‚ 1
           â”‚
           â”‚ 1
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   transactions      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK _id: String(UUID)â”‚
â”‚ FK marketplace_page â”‚â”€â”€â–º marketplacepages._id
â”‚ FK buyer_id â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º users._id
â”‚ FK seller_id â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º users._id
â”‚    amount: Number   â”‚
â”‚    platform_fee: Numâ”‚
â”‚    payment_method: Stâ”‚
â”‚    status: String   â”‚
â”‚    payment_url: Str â”‚
â”‚    paid_at: Date    â”‚
â”‚    refund: Object   â”‚
â”‚    created_at: Date â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     chatrooms       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK _id: ObjectId    â”‚
â”‚ FK user_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º users._id
â”‚ FK admin_id â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º users._id (nullable)
â”‚    subject: String  â”‚
â”‚    status: String   â”‚
â”‚    priority: String â”‚
â”‚    tags: [String]   â”‚
â”‚    unread_count_userâ”‚
â”‚    unread_count_adminâ”‚
â”‚    last_message_at  â”‚
â”‚    created_at: Date â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1
           â”‚
           â”‚ *
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   chatmessages      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK _id: ObjectId    â”‚
â”‚ FK room_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º chatrooms._id
â”‚ FK sender_id â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º users._id
â”‚    sender_type: Str â”‚
â”‚    message: String  â”‚
â”‚    message_type: Strâ”‚
â”‚    attachments: []  â”‚
â”‚    read_by_user: Boolâ”‚
â”‚    read_by_admin:Boolâ”‚
â”‚    ai_metadata: Obj â”‚
â”‚    created_at: Date â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 5.2. DynamoDB Tables (WebSocket)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TABLE: websocket-connections (DynamoDB)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK connectionId: String                            â”‚
â”‚    userId: String â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ GSI: UserIdIndex
â”‚    userRole: String                                â”‚â”‚
â”‚    userName: String                                â”‚â”‚
â”‚    userEmail: String                               â”‚â”‚
â”‚    rooms: [String]                                 â”‚â”‚
â”‚    connectedAt: String (ISO timestamp)             â”‚â”‚
â”‚    ttl: Number (Unix timestamp + 24h)              â”‚â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                                                      â”‚
                                                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ GSI Query: userId = ?
    â”‚
    â–¼
  Get all connections for a user
```

## 5.3. Relationships (Má»‘i Quan Há»‡)

### One-to-Many Relationships (1:N)

1. **User â†’ Pages** (1:N)
   - Má»™t User cÃ³ thá»ƒ táº¡o nhiá»u Pages
   - Má»—i Page thuá»™c vá» má»™t User
   - Foreign Key: `pages.user_id` â†’ `users._id`

2. **User â†’ MarketplacePages** (1:N)
   - Má»™t Seller cÃ³ thá»ƒ Ä‘Äƒng bÃ¡n nhiá»u Templates
   - Má»—i Template thuá»™c vá» má»™t Seller
   - Foreign Key: `marketplacepages.seller_id` â†’ `users._id`

3. **Page â†’ FormSubmissions** (1:N)
   - Má»™t Page cÃ³ thá»ƒ cÃ³ nhiá»u Form Submissions (leads)
   - Má»—i Form Submission thuá»™c vá» má»™t Page
   - Foreign Key: `formsubmissions.page_id` â†’ `pages._id`

4. **MarketplacePage â†’ Orders** (1:N)
   - Má»™t Template cÃ³ thá»ƒ Ä‘Æ°á»£c mua nhiá»u láº§n
   - Má»—i Order mua má»™t Template
   - Foreign Key: `orders.marketplacePageId` â†’ `marketplacepages._id`

5. **ChatRoom â†’ ChatMessages** (1:N)
   - Má»™t ChatRoom cÃ³ nhiá»u Messages
   - Má»—i Message thuá»™c vá» má»™t ChatRoom
   - Foreign Key: `chatmessages.room_id` â†’ `chatrooms._id`

### Many-to-One Relationships (N:1)

1. **Orders â†’ Transaction** (N:1)
   - Nhiá»u Orders cÃ³ thá»ƒ dÃ¹ng chung má»™t Transaction (náº¿u mua bundle)
   - Má»—i Transaction cÃ³ thá»ƒ cÃ³ nhiá»u Orders
   - Foreign Key: `orders.transactionId` â†’ `transactions._id`

### Many-to-Many Relationships (M:N)

1. **User â†” ChatRoom** (M:N qua admin assignment)
   - Má»™t User cÃ³ thá»ƒ cÃ³ nhiá»u ChatRooms
   - Má»™t Admin cÃ³ thá»ƒ handle nhiá»u ChatRooms
   - Implemented via: `chatrooms.user_id` vÃ  `chatrooms.admin_id`

---

# 6. LUá»’NG Xá»¬ LÃ (SEQUENCE DIAGRAMS)

## 6.1. Luá»“ng ÄÄƒng KÃ½ & ÄÄƒng Nháº­p

```
User          Frontend        Backend API      MongoDB        Email Service
 â”‚                â”‚               â”‚               â”‚                 â”‚
 â”‚  Nháº­p thÃ´ng tinâ”‚               â”‚               â”‚                 â”‚
 â”‚  Ä‘Äƒng kÃ½       â”‚               â”‚               â”‚                 â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚               â”‚               â”‚                 â”‚
 â”‚                â”‚ POST /api/authâ”‚               â”‚                 â”‚
 â”‚                â”‚    /register  â”‚               â”‚                 â”‚
 â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚               â”‚                 â”‚
 â”‚                â”‚               â”‚ Validate data â”‚                 â”‚
 â”‚                â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
 â”‚                â”‚               â”‚ Hash password â”‚                 â”‚
 â”‚                â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
 â”‚                â”‚               â”‚ Insert user   â”‚                 â”‚
 â”‚                â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚
 â”‚                â”‚               â”‚               â”‚                 â”‚
 â”‚                â”‚               â”‚ User created  â”‚                 â”‚
 â”‚                â”‚               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
 â”‚                â”‚               â”‚               â”‚                 â”‚
 â”‚                â”‚               â”‚ Generate JWT  â”‚                 â”‚
 â”‚                â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
 â”‚                â”‚               â”‚ Send verification email         â”‚
 â”‚                â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                â”‚               â”‚                                  â”‚
 â”‚                â”‚ 201 Created   â”‚                Email sent        â”‚
 â”‚                â”‚ {user, token} â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚                 â”‚
 â”‚  Welcome!      â”‚               â”‚               â”‚                 â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚               â”‚                 â”‚
 â”‚                â”‚               â”‚               â”‚                 â”‚
 â”‚                â”‚               â”‚               â”‚                 â”‚
 â”‚  Click verify  â”‚               â”‚               â”‚                 â”‚
 â”‚  link in email â”‚               â”‚               â”‚                 â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ GET /verify   â”‚               â”‚                 â”‚
 â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚               â”‚                 â”‚
 â”‚                â”‚               â”‚ Update user   â”‚                 â”‚
 â”‚                â”‚               â”‚ emailVerified â”‚                 â”‚
 â”‚                â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚
 â”‚                â”‚               â”‚               â”‚                 â”‚
 â”‚                â”‚ Verified!     â”‚ Updated       â”‚                 â”‚
 â”‚                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
 â”‚  Verified      â”‚               â”‚               â”‚                 â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚               â”‚                 â”‚
```

## 6.2. Luá»“ng Táº¡o vÃ  Xuáº¥t Báº£n Landing Page

```
User       Frontend      Backend API    MongoDB    S3       CloudFront  Route53
 â”‚             â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚ Click "Táº¡o â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚ Page Má»›i"  â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚ POST /api    â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚ /pages/createâ”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚ Generate   â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚ UUID       â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚ Create Pageâ”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚ Page created â”‚ Saved      â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚ {_id, url}   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚            â”‚         â”‚
 â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚        â”‚            â”‚         â”‚
 â”‚ Redirect to â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚ Editor      â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚ Chá»‰nh sá»­a   â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚ ná»™i dung    â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚ Upload áº£nh  â”‚ POST /upload â”‚            â”‚        â”‚            â”‚         â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚ Upload to S3â”‚       â”‚            â”‚         â”‚
 â”‚             â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚         â”‚
 â”‚             â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚ Image URL    â”‚            â”‚ URL    â”‚            â”‚         â”‚
 â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—„â”¤            â”‚         â”‚
 â”‚ Image URL   â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚ Click       â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚ "Xuáº¥t báº£n"  â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ POST /api    â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚ /pages/:id   â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚ /publish     â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚ Generate   â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚ HTML/CSS/JSâ”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚ Upload to S3â”‚       â”‚            â”‚         â”‚
 â”‚             â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚         â”‚
 â”‚             â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚ Create CloudFront   â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚ Distribution        â”‚            â”‚         â”‚
 â”‚             â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚
 â”‚             â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚ Update Route53 DNS  â”‚            â”‚         â”‚
 â”‚             â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚             â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚ Update Pageâ”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚ status='published'  â”‚            â”‚         â”‚
 â”‚             â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚        â”‚            â”‚         â”‚
 â”‚             â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚ Published!   â”‚ Updated    â”‚        â”‚            â”‚         â”‚
 â”‚             â”‚ {url: ...}   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚            â”‚         â”‚
 â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚        â”‚            â”‚         â”‚
 â”‚ Page live!  â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚ View: https â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚ ://xxx.shop â”‚              â”‚            â”‚        â”‚            â”‚         â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚            â”‚        â”‚            â”‚         â”‚
```

## 6.3. Luá»“ng Mua Landing Page Template

```
Buyer     Frontend    Backend API   MongoDB   Payment   Transaction  WebSocket
                                              Gateway     Service      Service
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚ Chá»n       â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚ template   â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚ GET /api   â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚ /marketplaceâ”‚          â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚ /:id       â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚ Find      â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚ template  â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚ Template   â”‚ Data      â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚ details    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚           â”‚            â”‚
 â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚         â”‚           â”‚            â”‚
 â”‚ Template   â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚ info       â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚ Click "Mua"â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ POST /api  â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚ /payment   â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚ /create    â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚ Create    â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚ Transactionâ”‚        â”‚           â”‚            â”‚
 â”‚            â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚ Tx saved  â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚ Request payment     â”‚           â”‚            â”‚
 â”‚            â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚ Payment URL         â”‚            â”‚
 â”‚            â”‚ Payment URLâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚            â”‚
 â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚         â”‚           â”‚            â”‚
 â”‚ Redirect   â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚ to Payment â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚            â”‚
 â”‚            â”‚  Pay with MoMo/VNPay   â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚â—„â”€â”€â”€â”€IPN callbackâ”€â”€â”€â”€â”¤           â”‚            â”‚
 â”‚            â”‚            â”‚ POST /payment/      â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚      momo/ipn       â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚ Verify    â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚ signature â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚ Process payment success         â”‚            â”‚
 â”‚            â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚ Mark Tx COMPLETED      â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚ Create Order           â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚ Clone Page Template    â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚ Send notifications     â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚ Notify buyerâ”‚
 â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€WebSocket messageâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚ Notify sellerâ”‚
 â”‚  ğŸ‰ Mua    â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚  thÃ nh cÃ´ngâ”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚ GET new    â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚ page       â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Get clonedâ”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚ page      â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚           â”‚            â”‚
 â”‚            â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚ Page data  â”‚ Page      â”‚         â”‚           â”‚            â”‚
 â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚           â”‚            â”‚
 â”‚ Edit new   â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚ page       â”‚            â”‚           â”‚         â”‚           â”‚            â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚           â”‚         â”‚           â”‚            â”‚
```

## 6.4. Luá»“ng Chat vá»›i AI vÃ  Admin

```
User      Frontend   WebSocket    Lambda      Backend     AI Service   Admin
                     Gateway      Handler     MongoDB
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚ Má»Ÿ chat   â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚ support    â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚ Connect  â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚ WSS      â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚ $connect   â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚ Validate  â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚ JWT       â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚ Save conn â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚ DynamoDB  â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚ Connectedâ”‚ 200 OK     â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚            â”‚          â”‚
 â”‚ Connected  â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚ Gá»­i tin    â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚ nháº¯n       â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚ "TÃ´i cáº§n   â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚  há»— trá»£"   â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Send     â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚ message  â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚ $default   â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚ Save msg  â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚ Analyze   â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚ with AI   â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚ AI responseâ”‚          â”‚
 â”‚            â”‚          â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚ Check if  â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚ escalate  â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚ Escalate! â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚ Notify    â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚ admin     â”‚            â”‚          â”‚
 â”‚            â”‚ AI msg   â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€WebSocket messageâ”€â”€â”€â”€â”¤            â”‚   ğŸ””      â”‚
 â”‚ AI: "TÃ´i   â”‚          â”‚            â”‚           â”‚            â”‚   Alert   â”‚
 â”‚ sáº½ káº¿t ná»‘i â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚ vá»›i admin" â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚  Admin   â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚  join    â”‚
 â”‚            â”‚          â”‚            â”‚ Assign    â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚ admin     â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚ Admin    â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚ joined   â”‚â—„â”€â”€â”€WebSocket messageâ”€â”€â”€â”¤            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚ "Admin Ä‘Ã£  â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚  tham gia" â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚  Admin   â”‚
 â”‚            â”‚          â”‚            â”‚           â”‚            â”‚  gá»­i msg â”‚
 â”‚            â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚           â”‚            â”‚          â”‚
 â”‚ Admin:     â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚ "ChÃ o báº¡n" â”‚          â”‚            â”‚           â”‚            â”‚          â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚            â”‚           â”‚            â”‚          â”‚
```

## 6.5. Luá»“ng Real-time Dashboard Update

```
System      Transaction   WebSocket   DynamoDB   Frontend   Dashboard
Event       Model         Service     Connections  (Buyer)   (Admin)
 â”‚              â”‚             â”‚           â”‚           â”‚          â”‚
 â”‚ Order        â”‚             â”‚           â”‚           â”‚          â”‚
 â”‚ delivered    â”‚             â”‚           â”‚           â”‚          â”‚
 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚           â”‚           â”‚          â”‚
 â”‚              â”‚ markAsPaid()â”‚           â”‚           â”‚          â”‚
 â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚           â”‚          â”‚
 â”‚              â”‚             â”‚           â”‚           â”‚          â”‚
 â”‚              â”‚ Notify buyerâ”‚           â”‚           â”‚          â”‚
 â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚           â”‚          â”‚
 â”‚              â”‚             â”‚ Get buyer â”‚           â”‚          â”‚
 â”‚              â”‚             â”‚ connectionsâ”‚          â”‚          â”‚
 â”‚              â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚          â”‚
 â”‚              â”‚             â”‚           â”‚           â”‚          â”‚
 â”‚              â”‚             â”‚ connectionIds         â”‚          â”‚
 â”‚              â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚          â”‚
 â”‚              â”‚             â”‚           â”‚           â”‚          â”‚
 â”‚              â”‚             â”‚ Send message          â”‚          â”‚
 â”‚              â”‚             â”‚ order_delivered       â”‚          â”‚
 â”‚              â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚
 â”‚              â”‚             â”‚           â”‚           â”‚          â”‚
 â”‚              â”‚             â”‚           â”‚ Received! â”‚          â”‚
 â”‚              â”‚             â”‚           â”‚ Refresh   â”‚          â”‚
 â”‚              â”‚             â”‚           â”‚ dashboard â”‚          â”‚
 â”‚              â”‚             â”‚           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
 â”‚              â”‚             â”‚           â”‚           â”‚          â”‚
 â”‚              â”‚ Notify      â”‚           â”‚           â”‚          â”‚
 â”‚              â”‚ dashboard   â”‚           â”‚           â”‚          â”‚
 â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚           â”‚          â”‚
 â”‚              â”‚             â”‚ Send to room          â”‚          â”‚
 â”‚              â”‚             â”‚ dashboard_admin       â”‚          â”‚
 â”‚              â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚              â”‚             â”‚           â”‚           â”‚          â”‚
 â”‚              â”‚             â”‚           â”‚           â”‚ Received!â”‚
 â”‚              â”‚             â”‚           â”‚           â”‚ Refresh  â”‚
 â”‚              â”‚             â”‚           â”‚           â”‚ stats    â”‚
 â”‚              â”‚             â”‚           â”‚           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚              â”‚             â”‚           â”‚           â”‚          â”‚
 â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚           â”‚          â”‚
 â”‚ Done         â”‚             â”‚           â”‚           â”‚          â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚           â”‚           â”‚          â”‚
```

---

*Tiáº¿p tá»¥c file cuá»‘i vá»›i cÃ´ng nghá»‡ & deployment chi tiáº¿t...*
